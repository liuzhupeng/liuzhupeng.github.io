<!doctype html>



  


<html class="theme-next mist use-motion" lang="zh-Hans">
<head>
  <meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>






<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />



  <meta name="google-site-verification" content="true" />







	<meta name="baidu-site-verification" content="ADEVsVvcYE" />







  
  
  <link href="/lib/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css" />




  
  
  
  

  
    
    
  

  

  

  

  

  
    
    
    <link href="//fonts.googleapis.com/css?family=Lato:300,300italic,400,400italic,700,700italic&subset=latin,latin-ext" rel="stylesheet" type="text/css">
  






<link href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css" />

<link href="/css/main.css?v=5.1.1" rel="stylesheet" type="text/css" />


  <meta name="keywords" content="angularJS," />





  <link rel="alternate" href="/atom.xml" title="liuzhupeng的博客" type="application/atom+xml" />




  <link rel="shortcut icon" type="image/x-icon" href="/favicon.ico?v=5.1.1" />






<meta name="description" content="目录 注入依赖 ng-bind ng-controller作用域  $scope里的$apply、$digest方法  $scope里的$watch 案例 购物车 模块和控制器">
<meta name="keywords" content="angularJS">
<meta property="og:type" content="article">
<meta property="og:title" content="angularJS 1.x 基本语法">
<meta property="og:url" content="http://yoursite.com/2018/09/03/angularjs/angular/index.html">
<meta property="og:site_name" content="liuzhupeng的博客">
<meta property="og:description" content="目录 注入依赖 ng-bind ng-controller作用域  $scope里的$apply、$digest方法  $scope里的$watch 案例 购物车 模块和控制器">
<meta property="og:image" content="http://i.imgur.com/1N6Xngq.png">
<meta property="og:image" content="http://i.imgur.com/Bx0h31n.png">
<meta property="og:image" content="http://i.imgur.com/9m3ASvy.png">
<meta property="og:image" content="http://i.imgur.com/5fNsnr9.png">
<meta property="og:image" content="http://i.imgur.com/5vjcuds.png">
<meta property="og:image" content="http://i.imgur.com/jJ09VN7.png">
<meta property="og:image" content="http://i.imgur.com/1WMYQg1.png">
<meta property="og:image" content="http://i.imgur.com/l2EgbTQ.png">
<meta property="og:image" content="http://i.imgur.com/779ARvP.png">
<meta property="og:image" content="http://i.imgur.com/1s3kGXd.png">
<meta property="og:image" content="http://i.imgur.com/7wAiSbt.png">
<meta property="og:image" content="http://i.imgur.com/SkYyIum.png">
<meta property="og:image" content="http://i.imgur.com/KcLpE4z.png">
<meta property="og:image" content="http://i.imgur.com/pcH9wOI.png">
<meta property="og:image" content="http://i.imgur.com/rs1l0yQ.png">
<meta property="og:image" content="http://i.imgur.com/yBleFSY.png">
<meta property="og:image" content="http://i.imgur.com/q9ECtl2.png">
<meta property="og:image" content="http://i.imgur.com/6uAQu6V.png">
<meta property="og:image" content="http://i.imgur.com/XtoRWnl.png">
<meta property="og:image" content="http://i.imgur.com/nOl6PfL.png">
<meta property="og:image" content="http://i.imgur.com/o0UvLNB.png">
<meta property="og:image" content="http://i.imgur.com/eNFA7JY.png">
<meta property="og:image" content="http://i.imgur.com/UQtHcrS.png">
<meta property="og:image" content="http://i.imgur.com/qCwY7GN.png">
<meta property="og:image" content="http://i.imgur.com/mE6qxiZ.png">
<meta property="og:image" content="http://i.imgur.com/vlhssEu.png">
<meta property="og:image" content="http://i.imgur.com/xn90D3h.png">
<meta property="og:image" content="http://i.imgur.com/H5QNeQZ.png">
<meta property="og:image" content="http://i.imgur.com/Y7MUrqY.png">
<meta property="og:image" content="http://i.imgur.com/EqoVHDI.png">
<meta property="og:image" content="http://i.imgur.com/YeXvTo5.png">
<meta property="og:image" content="http://i.imgur.com/sMMfJMT.png">
<meta property="og:image" content="http://i.imgur.com/WBcgCDr.png">
<meta property="og:image" content="http://i.imgur.com/kmLQHvx.png">
<meta property="og:image" content="http://i.imgur.com/7dvxqpG.png">
<meta property="og:image" content="http://i.imgur.com/CIuGJAq.png">
<meta property="og:image" content="http://i.imgur.com/vuVs7H7.png">
<meta property="og:image" content="http://i.imgur.com/BMJZfZx.png">
<meta property="og:image" content="http://i.imgur.com/cRJbt9k.png">
<meta property="og:image" content="http://i.imgur.com/8hGzovm.png">
<meta property="og:image" content="http://i.imgur.com/NxaQNYV.png">
<meta property="og:image" content="http://i.imgur.com/BSt9jmD.png">
<meta property="og:image" content="http://i.imgur.com/PzU4AId.png">
<meta property="og:image" content="http://i.imgur.com/uXYBvzM.png">
<meta property="og:image" content="http://i.imgur.com/hYHp2rT.png">
<meta property="og:image" content="http://i.imgur.com/ksXWlYR.png">
<meta property="og:image" content="http://i.imgur.com/o6xymsa.png">
<meta property="og:image" content="http://i.imgur.com/Q80uwwP.png">
<meta property="og:image" content="http://i.imgur.com/7Onrb9b.png">
<meta property="og:image" content="http://i.imgur.com/jlsbv5c.png">
<meta property="og:image" content="http://i.imgur.com/5W7XKpu.png">
<meta property="og:image" content="http://i.imgur.com/CeWuYy6.png">
<meta property="og:image" content="http://i.imgur.com/tg5eXFa.png">
<meta property="og:updated_time" content="2017-05-25T02:41:50.000Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="angularJS 1.x 基本语法">
<meta name="twitter:description" content="目录 注入依赖 ng-bind ng-controller作用域  $scope里的$apply、$digest方法  $scope里的$watch 案例 购物车 模块和控制器">
<meta name="twitter:image" content="http://i.imgur.com/1N6Xngq.png">



<script type="text/javascript" id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Mist',
    sidebar: {"position":"left","display":"post","offset":12,"offset_float":0,"b2t":false,"scrollpercent":false},
    fancybox: true,
    motion: true,
    duoshuo: {
      userId: '0',
      author: '博主'
    },
    algolia: {
      applicationID: 'XO07FKRYQU',
      apiKey: '42f277b78659c936fba4af368318e5b9',
      indexName: 'lzpnote',
      hits: {"per_page":10},
      labels: {"input_placeholder":"搜索...","hits_empty":"未发现与 「${query}」相关的内容","hits_stats":"${hits} 条相关条目，使用了 ${time} 毫秒"}
    }
  };
</script>



  <link rel="canonical" href="http://yoursite.com/2018/09/03/angularjs/angular/"/>





  <title>angularJS 1.x 基本语法 | liuzhupeng的博客</title>
</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="zh-Hans">

  















  
  
    
  

  <div class="container sidebar-position-left page-post-detail ">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta ">
    

    <div class="custom-logo-site-title">
      <a href="/"  class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">liuzhupeng的博客</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
      
        <p class="site-subtitle"></p>
      
  </div>

  <div class="site-nav-toggle">
    <button>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>

<nav class="site-nav">
  <!-- 
 -->
 
  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-home"></i> <br />
            
            首页
          </a>
        </li>
      
        
        <li class="menu-item menu-item-categories">
          <a href="/categories" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-th"></i> <br />
            
            分类
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-archive"></i> <br />
            
            归档
          </a>
        </li>
      
        
        <li class="menu-item menu-item-tags">
          <a href="/tags" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-tags"></i> <br />
            
            标签
          </a>
        </li>
      
        
        <li class="menu-item menu-item-about">
          <a href="/about" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-user"></i> <br />
            
            关于
          </a>
        </li>
      

      
        <li class="menu-item menu-item-search">
          
                <a href="javascript:;" class="popup-trigger">
			<!-- 增加结束 -->
              
            
              <i class="menu-item-icon fa fa-search fa-fw"></i> <br />
            
            搜索
          </a>
        </li>
      
    </ul>
  

  
    <div class="site-search">
      
  
  <div class="algolia-popup popup search-popup">
    <div class="algolia-search">
      <div class="algolia-search-input-icon">
        <i class="fa fa-search"></i>
      </div>
      <div class="algolia-search-input" id="algolia-search-input"></div>
    </div>

    <div class="algolia-results">
      <div id="algolia-stats"></div>
      <div id="algolia-hits"></div>
      <div id="algolia-pagination" class="algolia-pagination"></div>
    </div>

    <span class="popup-btn-close">
      <i class="fa fa-times-circle"></i>
    </span>
  </div>




    </div>
  
</nav>



 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            

  <div id="posts" class="posts-expand">
    

  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2018/09/03/angularjs/angular/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="刘铸澎">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="liuzhupeng的博客">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">angularJS 1.x 基本语法</h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2018-09-03T09:01:50+08:00">
                2018-09-03
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Html5/" itemprop="url" rel="index">
                    <span itemprop="name">Html5</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          
             <span id="/2018/09/03/angularjs/angular/" class="leancloud_visitors" data-flag-title="angularJS 1.x 基本语法">
               <span class="post-meta-divider">|</span>
               <span class="post-meta-item-icon">
                 <i class="fa fa-eye"></i>
               </span>
               
                 <span class="post-meta-item-text">阅读次数 </span>
               
                 <span class="leancloud-visitors-count"></span>
             </span>
          

          

          

          

        </div>
      </header>
    

    <div class="post-body" itemprop="articleBody">

      
      

      
        <h3 id="目录"><a href="#目录" class="headerlink" title="目录"></a>目录</h3><ul>
<li><a href="#ioc">注入依赖</a></li>
<li><a href="#ngBind">ng-bind</a></li>
<li><a href="#ngController">ng-controller作用域</a></li>
<li><a href="#scopead"> $scope里的$apply、$digest方法</a></li>
<li><a href="#swatch"> $scope里的$watch</a></li>
<li><a href="#scart">案例 购物车</a></li>
<li><a href="#smodule">模块和控制器</a><a id="more"></a> </li>
<li><a href="#provider">$provide里provider方法</a></li>
<li><a href="#pfservice">$provider里factory、service方法</a></li>
<li><a href="#pcontrint">多个控制器内数据共享</a></li>
<li><a href="#filterncd">过滤器 number、currency、date</a></li>
<li><a href="#filterll">过滤器 limitTo、lowercase</a></li>
<li><a href="#filterList">案例 过滤器 产品列表（排序）</a></li>
<li><a href="#filtercp">自定义过滤器$controllerProvider使用</a></li>
<li><a href="#ciocsh">控制器的合理使用、显示和隐示的依赖注入</a></li>
<li><a href="#binrendering">内置渲染指令</a></li>
<li><a href="#retemp">自定义指令 restrict、template等属性</a></li>
<li><a href="#templateUrl">自定义指令 templateUrl属性</a></li>
<li><a href="#tranPriority">自定义指令transclude、priority等属性</a></li>
<li><a href="#compileLink">自定义指令 compile  link属性</a></li>
<li><a href="#direContro">自定义指令 controller &amp;&amp; link 等属性</a></li>
<li><a href="#direrequire">自定义指令 require 属性</a></li>
<li><a href="#direscope">自定义指令 scope 属性</a></li>
<li><a href="#direAccordion">案例：自定义accordion指令</a></li>
<li><a href="#modelcvr">模块里constant、value、run方法</a></li>
<li><a href="#fromText"> 表单 Form、Text</a></li>
<li><a href="#diremodels">自定义表单验证</a></li>
<li><a href="#ngroute">$templateCache</a></li>
<li><a href="#templateCache">complie与link</a></li>
<li><a href="#mouseenter">鼠标滑动引起后台控制</a></li>
<li><p><a href="#mouseenterSuperMan">鼠标滑动之动感超人</a></p>
<h3 id="注入依赖"><a href="#注入依赖" class="headerlink" title="注入依赖"></a><a name="ioc">注入依赖</a></h3><h4 id="简单模型"><a href="#简单模型" class="headerlink" title="简单模型"></a>简单模型</h4>  <script>
      var A = function(){
          this.getName =     function(){
              return = '张三';
          }
      }
      var a = new A;
      var B = function(){
          //B依赖于a
          document.write(a.getName());
      }
      //a注入b
      //var b = new B(a);
      var b = new B();

      //js里2个方法
      1.将啊传入到b里面去
      2.a是全局变量

  </script> 

</li>
</ul>
<h3 id="ng-bind"><a href="#ng-bind" class="headerlink" title="ng-bind"></a><a name="ngBind">ng-bind</a></h3><ul>
<li>使用花括号语法时，在AngularJS使用数据替换模板中的花括号时，第一个加载的页面，通常是应用中的html，其未被渲染的模板可能会被用户看到。而使用第二站方法的视图不会遇到这种问题。</li>
<li>原因是，浏览器需要首先加载index.html页面，渲染它，然后AngularJS才能把它解析成你期望看到的内容。</li>
<li><p>html页面中的数据绑定操作，建议采用ng-bind。那么在数据加载完成之前用户就不会看到任何内容。</p>
<pre><code>&lt;input type=&quot;text&quot; value=&quot;&quot; ng-model=&quot;name&quot; /&gt;
{{name}}    
&lt;div ng-bind=&quot;name&quot;&gt;&lt;/div&gt;
</code></pre></li>
</ul>
<h3 id="ng-controller作用域"><a href="#ng-controller作用域" class="headerlink" title="ng-controller作用域"></a><a name="ngController">ng-controller作用域</a></h3><ul>
<li>改变第一个表单是第二个表单也跟着变化</li>
<li><p>改变第二个则第一个和第二个都独立</p>
<pre><code>&lt;div ng-app=&quot;&quot;&gt;
  &lt;div ng-controller=&quot;firstController&quot;&gt;
    &lt;input type=&quot;text&quot; value=&quot;&quot; ng-model=&quot;name&quot; /&gt;
      &lt;div  ng-controller=&quot;firstController&quot;&gt;
          &lt;input type=&quot;text&quot; value=&quot;&quot; ng-model=&quot;name&quot; /&gt;
      &lt;/div&gt;
  &lt;/div&gt;
  &lt;script&gt;
    var firstController = function($scope){
      $scope.name = &apos;张三&apos;;
      console.log($scope);
    }
    var secondController = function($scope){
      $scope.name=&apos;李四&apos;;
    }
  &lt;/script&gt;
  &lt;script&gt;
    //改变第一个表单是第二个表单也跟着变化
    //改变第二个则第一个和第二个都独立
    function first(){
      var name = &apos;张三&apos;;
      function second() {
        var name=&quot;张三123&quot;
        alert(name);
      }
    }
  &lt;/script&gt;
</code></pre><h3 id="scope里的-apply、-digest方法"><a href="#scope里的-apply、-digest方法" class="headerlink" title=" $scope里的$apply、$digest方法"></a><a name="scopead"> $scope里的$apply、$digest方法</a></h3><p><img src="http://i.imgur.com/1N6Xngq.png" alt=""><br><img src="http://i.imgur.com/Bx0h31n.png" alt=""><br><img src="http://i.imgur.com/9m3ASvy.png" alt=""><br><img src="http://i.imgur.com/5fNsnr9.png" alt=""><br><img src="http://i.imgur.com/5vjcuds.png" alt=""></p>
<pre><code> &lt;div ng-app=&quot;&quot;&gt;
        &lt;div ng-controller=&quot;firstController&quot;&gt;
            {{date}}
        &lt;/div&gt;

    &lt;/div&gt;
    &lt;script&gt;
        var firstController = function($scope){
           $scope.date = new Date();
            setInterval(function () {
                //这里虽然没有变 但是并没有处罚脏检查
                $scope.date = new Date();
            },1000)
            setInterval(function () {
               $scope.$apply(function () {
                   //...回去触发脏检查
                   $scope.date = new Date();
               })
            },1000)
        }
     &lt;/script&gt;
    &lt;div id=&quot;a&quot;&gt;
        obj.b ....
    &lt;/div&gt;
&lt;script&gt;
    var obj = {
        b:300,
        set:function (key,val) {
            obj[key] = val;
            document.querySelector(&apos;a&apos;).innerHTML = val;
        }
    }
    obj.set (&apos;b&apos;,300);
&lt;/script&gt;
</code></pre><h3 id="scope里的-watch"><a href="#scope里的-watch" class="headerlink" title=" $scope里的$watch"></a><a name="swatch"> $scope里的$watch</a></h3><p><img src="http://i.imgur.com/jJ09VN7.png" alt=""></p>
<pre><code>&lt;script&gt;
       var firstController = function($scope){
         $scope.name = &apos;张三&apos;;
         $scope.data={
                 name:&apos;李四&apos;,
                 count:20
         }
         $scope.count = 0;
         //监听一个model，当一个model每一次改变时，都会触发第二个函数
         $scope.$watch(&apos;name&apos;,function(newValue,oldValue){
           ++$scope.count;
           if($scope.count &gt; 30){
             $scope.name = &apos;已经大于30次了&apos;;
           }
         })
         //
         $scope.$watch(&apos;data&apos;,function (){
</code></pre></li>
</ul>
<pre><code>    },true)//true表示监听data对象里面所有属性
    console.log($scope);
  }
&lt;/script&gt;
</code></pre><h4 id="案例-购物车"><a href="#案例-购物车" class="headerlink" title="案例 购物车"></a><a name="scart">案例 购物车</a></h4><ul>
<li><p>index.html</p>
<pre><code>&lt;html lang=&quot;en&quot;&gt;
    &lt;head&gt;
        &lt;meta charset=&quot;UTF-8&quot;&gt;
        &lt;title&gt;Title&lt;/title&gt;
        &lt;link rel=&quot;stylesheet&quot; href=&quot;css/bootstrap.min.css&quot;&gt;
    &lt;/head&gt;
    &lt;body ng-app=&quot;app&quot;&gt;
        &lt;div class=&quot;container&quot; ng-controller=&quot;cartController&quot;&gt;
            &lt;table class=&quot;table&quot; ng-show=&quot;cart.length&quot;&gt;
                &lt;thead&gt;
                    &lt;tr&gt;
                        &lt;th&gt;产品编号&lt;/th&gt;
                        &lt;th&gt;产品名字&lt;/th&gt;
                        &lt;th&gt;购买数量&lt;/th&gt;
                         &lt;th&gt;产品单价&lt;/th&gt;
                        &lt;th&gt;产品总价&lt;/th&gt;
                        &lt;th&gt;操作&lt;/th&gt;
                    &lt;/tr&gt;
                &lt;/thead&gt;
                &lt;tbody&gt;
                    &lt;tr ng-repeat=&quot;item in cart&quot;&gt;
                        &lt;td&gt;{{item.id}}&lt;/td&gt;
                        &lt;td&gt;{{item.name}}&lt;/td&gt;
                        &lt;td&gt;
                           &lt;button type=&quot;button&quot; ng-click=&quot;reduce(item.id)&quot; class=&quot;btn btn-primary&quot;&gt;-&lt;/button&gt;
                            &lt;input type=&quot;text&quot; value=&quot;{{item.quantity}}&quot; ng-model=&quot;item.quantity&quot; /&gt;
                            &lt;button type=&quot;button&quot; ng-click=&quot;add(item.id)&quot; class=&quot;btn btn-primary&quot;&gt;+&lt;/button&gt;
                        &lt;/td&gt;
                        &lt;td&gt;{{item.price}}&lt;/td&gt;
                        &lt;td&gt;{{item.price*item.quantity}}&lt;/td&gt;
                        &lt;td&gt;
                            &lt;button type=&quot;button&quot; ng-click=&quot;remove(item.id)&quot; class=&quot;btn btn-danger&quot;&gt;移除&lt;/button&gt;
                        &lt;/td&gt;
                    &lt;/tr&gt;
                &lt;tr&gt;
                    &lt;td&gt;
                        总购买价

                    &lt;/td&gt;
                    &lt;td&gt;{{totalPrice()}}&lt;/td&gt;
                    &lt;td&gt;总购买数&lt;/td&gt;
                    &lt;td&gt;{{totalQuantity()}}&lt;/td&gt;
                    &lt;td colspan=&quot;2&quot;&gt; &lt;button type=&quot;button&quot; ng-click=&quot;cart = {}&quot; class=&quot;btn btn-danger&quot;&gt;清空购物车&lt;/button&gt;&lt;/td&gt;
                &lt;/tr&gt;
                &lt;/tbody&gt;
            &lt;/table&gt;
            &lt;p ng-show=&quot;!cart.length&quot;&gt;您的购物车为空&lt;/p&gt;
        &lt;/div&gt;

    &lt;script type=&quot;text/javascript&quot; src=&quot;angular/angular.min.js&quot;&gt;&lt;/script&gt;
    &lt;script type=&quot;text/javascript&quot; src=&quot;app/index.js&quot;&gt;&lt;/script&gt;
    &lt;/body&gt;
    &lt;/html&gt;
</code></pre></li>
<li><p>index.js</p>
<pre><code>var app = angular.module(&apos;app&apos;, []);
app.controller(&apos;cartController&apos;,function ($scope) {
    $scope.cart = [
        {
            id:1000,
            name:&apos;iphone5&apos;,
            quantity:3,
            price:4300
        },
        {
            id:3300,
            name:&apos;mac&apos;,
            quantity:3,
            price:14300
        },
        {
            id:232,
            name:&apos;iphone5s&apos;,
            quantity:3,
            price:6500
        },
        {
            id:10005,
            name:&apos;ipad&apos;,
            quantity:5,
            price:6900
        }
    ];
    /**
     * 计算购买总价
     */
    $scope.totalPrice = function () {
        var total = 0;
        angular.forEach($scope.cart,function (item) {
            total += item.quantity*item.price;
        })
        return total;
    }
    /**
     * 计算购买数
     */
    $scope.totalQuantity = function () {
        var total = 0;
        angular.forEach($scope.cart,function (item) {
            total += parseInt(item.quantity);
        })
        return total;
    }
    /**
     * 为某个产品添加一个数量
     */
    $scope.add = function (id) {
       var index = findIndex(id);
        if(index != -1){
            ++$scope.cart[index].quantity;
        }
    }

    /**
     * 为某个产品减少一个数量
     */
    $scope.reduce = function (id) {
        var index = findIndex(id);
        if(index != -1){
            var item = $scope.cart[index];
            if(item.quantity&gt;1){
                --$scope.cart[index].quantity;
            }else{
                var returnKey = confirm(&apos;是否从购物车内删除该产品&apos;);
                if(returnKey){
                    $scope.remove(id);
                }
            }

        }
    }
    /**
     * 找一个元素
     */
    var findIndex = function(id){
        var index = -1;
        angular.forEach($scope.cart,function (item,key) {
            // console.log(key);
            if(item.id == id){
                index = key;
                return;
            }
        });
        return index;
    }
    /**
     * 移除一项
     * @param id
     */
    $scope.remove = function (id) {
        var index = findIndex(id);
        if(index != -1){
            $scope.cart.splice(index,1);
        }
        //自动做脏检查
    }
    $scope.$watch(&apos;cart&apos;,function (newValue,oldValue) {
        angular.forEach(newValue,function (item, key) {
            if(item.quantity &lt; 1){
                var returnKey = confirm(&apos;是否从购物车内删除该产品&apos;);
                if(returnKey){
                    $scope.remove(item.id);
                }else{
                    item.quantity = oldValue[key].quantity;
                }
            }
        })
    },true);

})
</code></pre></li>
</ul>
<h3 id="模块和控制器"><a href="#模块和控制器" class="headerlink" title="模块和控制器"></a><a name="smodule">模块和控制器</a></h3><p><img src="http://i.imgur.com/1WMYQg1.png" alt=""><br><img src="http://i.imgur.com/l2EgbTQ.png" alt=""><br><img src="http://i.imgur.com/779ARvP.png" alt=""><br><img src="http://i.imgur.com/1s3kGXd.png" alt=""><br><img src="http://i.imgur.com/7wAiSbt.png" alt=""> </p>
<pre><code> &lt;body ng-app=&quot;app&quot;&gt;
        &lt;div ng-controller=&quot;emp&quot;&gt;
            {{name}}
        &lt;/div&gt;
&lt;/body&gt;
</code></pre><hr>
<pre><code> var app = angular.module(&quot;app&quot;, []);
 app.controller(&apos;emp&apos;, function($scope){
    $scope.name = &apos;张三&apos;;
});
</code></pre><h3 id="provide里provider方法"><a href="#provide里provider方法" class="headerlink" title="$provide里provider方法"></a><a name="provider">$provide里provider方法</a></h3><p><img src="http://i.imgur.com/SkYyIum.png" alt=""></p>
<pre><code>    var myApp = angular.module(&apos;myApp&apos;,function ($provide) {
    //自定义服务
    $provide.provider(&apos;CustomService&apos;,function () {
        this.$get = function () {
            return{
                message:&apos;CustomService Message&apos;
            }
        }
    });
    $provide.provider(&apos;CustomService2&apos;,function () {
        this.$get = function () {
            return{
                message:&apos;CustomService2 Message&apos;
            }
        }
    });
});
myApp.controller(&apos;firstController&apos;,function ($scope, CustomService,CustomService2) {
    $scope.name = &apos;张三&apos;;
    console.log(CustomService);
    console.log(CustomService2);
})
</code></pre><h3 id="provider里factory、service方法"><a href="#provider里factory、service方法" class="headerlink" title="$provider里factory、service方法"></a><a name="pfservice">$provider里factory、service方法</a></h3><p><img src="http://i.imgur.com/KcLpE4z.png" alt=""><br><img src="http://i.imgur.com/pcH9wOI.png" alt=""></p>
<pre><code>var myApp = angular.module(&apos;myApp&apos;,function ($provide) {
    //自定义服务
    $provide.provider(&apos;CustomService&apos;,function () {
        this.$get = function () {
            return{
                message:&apos;CustomService Message&apos;
            }
        }
    });
    //自定义工厂
    $provide.factory(&apos;CustomFactory&apos;,function () {
        return [1,2,3,4,5,6];
    });
    //自定义服务
    $provide.service(&apos;CustomService2&apos;,function () {
        return [&apos;上海&apos;];
        //return &apos;aaa&apos;;  //错误因为字符串不是对象
    })
});
myApp.controller(&apos;firstController&apos;,function ($scope, CustomService,CustomFactory,CustomService2) {
    $scope.name = &apos;张三&apos;;
    console.log(CustomService);
    console.log(CustomFactory);
    console.log(CustomService2);
})
//快捷方法
myApp.service();
myApp.factory();
</code></pre><h3 id="多个控制器内数据共享"><a href="#多个控制器内数据共享" class="headerlink" title="多个控制器内数据共享"></a><a name="pcontrint">多个控制器内数据共享</a></h3><ul>
<li><p>index.html</p>
<pre><code> &lt;div ng-app=&quot;myApp&quot;&gt;
    &lt;div ng-controller=&quot;firstController&quot;&gt;
       first.data &lt;input type=&quot;text&quot; ng-model=&quot;data.name&quot;&gt;
        first.Data &lt;input type=&quot;text&quot; ng-model=&quot;Data.message&quot;&gt;
        &lt;p&gt;
            first-name:{{data.name}}
        &lt;/p&gt;
        &lt;p&gt;
            first-message:{{Data.message}}
        &lt;/p&gt;
    &lt;/div&gt;
    &lt;div ng-controller=&quot;secondController&quot;&gt;
        &lt;p&gt;
            second-name:{{data.name}}
        &lt;/p&gt;
        &lt;p&gt;
            second-message:{{Data.message}}
        &lt;/p&gt;
    &lt;/div&gt;
&lt;/div&gt;
</code></pre></li>
<li><p>index.js</p>
<pre><code>angular.module(&apos;myApp&apos;,[])
.factory(&apos;Data&apos;,function () {
    //this.$get = function(){}
    return{
        message : &apos;共享数据&apos;
    };
})
.controller(&apos;firstController&apos;,function ($scope,Data){
    $scope.data = {
        name : &apos;张三&apos;
    };
    $scope.Data = Data;
 })
.controller(&apos;secondController&apos;,function ($scope,Data) {
    $scope.data = $scope.$$prevSibling.data;
    $scope.Data = Data;
});
</code></pre><h3 id="过滤器-number、currency、date"><a href="#过滤器-number、currency、date" class="headerlink" title="过滤器 number、currency、date"></a><a name="filterncd">过滤器 number、currency、date</a></h3><p><img src="http://i.imgur.com/rs1l0yQ.png" alt=""><br><img src="http://i.imgur.com/yBleFSY.png" alt=""></p>
<pre><code>数字：
{{123456789|number}}  //123,456,789 
{{123456789|number:3}} //123,456,789.000 
{{999999|currency}}    //$999,999.00 
{{999999|currency:'rmb'}}  //rmb999,999.00 
日期：
js:$scope.today = new Date;
{{today}}            //&quot;2016-07-01T08:54:10.410Z&quot; 
{{today|date:'medium'}} //Jul 1, 2016 4:57:19 PM
{{today|date:'short'}}  //7/1/16 5:00 PM
{{today|date:'fullDate'}}    //July 1, 2016
{{today|date:'longDate'}}    //July 1, 2016
{{today|date:'mediumDate'}}  //Jul 1, 2016
{{today|date:'shortDate'}}    // 7/1/16
{{today|date:'mediumTime'}}    //5:00:39 PM
{{today|date:'shortTime'}}    //5:00 PM 
year:
         {{today |date:'y'}}      2016
        {{today |date:'yy'}}    16
        {{today |date:'yyyy'}}    2016 
        month:
        {{today |date:'M'}}         7
        {{today |date:'MM'}}    07
        {{today |date:'MMM'}}     Jul 
        {{today |date:'MMMM'}}   July  
day:
        {{today |date:'d'}}    1
        Day in month:{today |date:&apos;dd&apos;}}
        Day in week:{{today |date:'EEEE'}} Friday  
        {{today |date:'EEE'}}  Fri   
hour:
        {{today |date:'HH'}}
        {{today |date:'H'}}
        {{today |date:'hh'}}
        {{today |date:'h'}}
minute:
            {{today |date:'mm'}}
            {{today |date:'m'}}
second:
            {{today |date:'ss'}}
            {{today |date:'s'}}
             {{today |date:'.sss'}}
{{today |date:'y-M-d H;m:s'}}  //2016-7-1 17;14:57 
</code></pre><h3 id="过滤器-limitTo、lowercase"><a href="#过滤器-limitTo、lowercase" class="headerlink" title="过滤器 limitTo、lowercase"></a><a name="filterll">过滤器 limitTo、lowercase</a></h3><pre><code>{{[1,2,3,4,5,6,7] | limitTo:3}}    //[1,2,3] 
{{[1,2,3,4,5,6,7] | limitTo:-3}}    //[5,6,7] 
</code></pre></li>
</ul>
<hr>
<pre><code>.factory(&apos;Data&apos;,function () {
    //this.$get = function(){}
    return{
        message : &apos;Hello World&apos;
    };
})
-------------------------------------------------
{{Data.message | lowercase}}    //hello world 
{{Data.message | uppercase}}    //HELLO WORLD 
</code></pre><hr>
<pre><code>.factory(&apos;Data&apos;,function () {
    //this.$get = function(){}
    return{
        message : &apos;Hello World&apos;,
        city : [
            {
                name:&apos;上海123&apos;,
                py:&apos;shanghai&apos;
            },
            {
                name:&apos;北京&apos;,
                py:&apos;beijing&apos;
            },
            {
                name:&apos;河南&apos;,
                py:&apos;henan&apos;
            }
        ]
    };
})
--------------------------------------------------
{{Data.city}}    //[{&quot;name&quot;:&quot;上海123&quot;,&quot;py&quot;:&quot;shanghai&quot;},{&quot;name&quot;:&quot;北京&quot;,&quot;py&quot;:&quot;beijing&quot;},{&quot;name&quot;:&quot;河南&quot;,&quot;py&quot;:&quot;henan&quot;}] 
{{Data.city | filter:'上海'}}    //[{&quot;name&quot;:&quot;上海123&quot;,&quot;py&quot;:&quot;shanghai&quot;}]
{{Data.city | filter:'name'}}    //[] 
{{Data.city | filter :{ py : 'g' } }}    //[{&quot;name&quot;:&quot;上海&quot;,&quot;py&quot;:&quot;shanghai&quot;},{&quot;name&quot;:&quot;北京&quot;,&quot;py&quot;:&quot;beijing&quot;}] 
---------------------------------------------------
orderBy:默认顺序是 正序 asc  a~z
{{Data.city | orderBy : 'py' }}        //[{&quot;name&quot;:&quot;北京&quot;,&quot;py&quot;:&quot;beijing&quot;},{&quot;name&quot;:&quot;河南&quot;,&quot;py&quot;:&quot;henan&quot;},{&quot;name&quot;:&quot;上海&quot;,&quot;py&quot;:&quot;shanghai&quot;}] 
逆序：desc z~a
{{Data.city | orderBy : '-py' }}    //[{&quot;name&quot;:&quot;上海&quot;,&quot;py&quot;:&quot;shanghai&quot;},{&quot;name&quot;:&quot;河南&quot;,&quot;py&quot;:&quot;henan&quot;},{&quot;name&quot;:&quot;北京&quot;,&quot;py&quot;:&quot;beijing&quot;}] 
</code></pre><hr>
<pre><code>后台使用过滤器
.controller(&apos;firstController&apos;,function ($scope,Data,$filter){
    //过滤器
    var number = $filter(&apos;number&apos;)(3000);
    console.log(number);   //3,000
 })

---------------------------------------------------
json过滤器主要用于调试
var jsonString = $filter(&apos;json&apos;)($scope.Data);
console.log(jsonString); 
-------------------
{
  &quot;message&quot;: &quot;Hello World&quot;,
  &quot;city&quot;: [
    {
      &quot;name&quot;: &quot;上海&quot;,
      &quot;py&quot;: &quot;shanghai&quot;
    },
    {
      &quot;name&quot;: &quot;北京&quot;,
      &quot;py&quot;: &quot;beijing&quot;
    },
    {
      &quot;name&quot;: &quot;河南&quot;,
      &quot;py&quot;: &quot;henan&quot;
    }
  ]
}
</code></pre><hr>
<pre><code>{{Data.city | filter : checkName }}    // [{&quot;name&quot;:&quot;上海&quot;,&quot;py&quot;:&quot;shanghai&quot;},{&quot;name&quot;:&quot;河南&quot;,&quot;py&quot;:&quot;henan&quot;}]
$scope.checkName = function (obj) {
    if(obj.py.indexOf(&apos;h&apos;)===-1)
        return false;
    return true;
}
</code></pre><h3 id="案例-过滤器-产品列表（排序）"><a href="#案例-过滤器-产品列表（排序）" class="headerlink" title="案例 过滤器 产品列表（排序）"></a><a name="filterList">案例 过滤器 产品列表（排序）</a></h3><ul>
<li><p>productlist.html</p>
<pre><code>&lt;!DOCTYPE html&gt;
&lt;html lang=&quot;en&quot;&gt;
&lt;head&gt;
    &lt;meta charset=&quot;UTF-8&quot;&gt;
    &lt;meta name=&quot;viewport&quot; content=&quot;width=device-width, initial-scale=1&quot;&gt;
    &lt;title&gt;Title&lt;/title&gt;
    &lt;!-- 新 Bootstrap 核心 CSS 文件 &lt;link rel=&quot;stylesheet&quot; href=&quot;../css/bootstrap.min.css&quot;&gt; --&gt;
    &lt;link rel=&quot;stylesheet&quot; href=&quot;//cdn.bootcss.com/bootstrap/3.3.5/css/bootstrap.min.css&quot;&gt;
    &lt;style&gt;
        .orderColor{
            color:red;
        }
    &lt;/style&gt;
&lt;/head&gt;
&lt;body ng-app=&quot;product&quot;&gt;
    &lt;div class=&quot;container&quot; ng-controller=&quot;productController&quot;&gt;
        &lt;nav class=&quot;navbar navbar-default&quot; role=&quot;navigation&quot;&gt;
                &lt;div class=&quot;collapse navbar-collapse&quot;  id=&quot;bs-example-navbar-collapse-1&quot;&gt;
                    &lt;form class=&quot;navbar-form navbar-left&quot; role=&quot;search&quot;&gt;
                        &lt;div class=&quot;form-group&quot;&gt;
                            &lt;input type=&quot;text&quot; ng-model=&quot;search&quot; class=&quot;form-control&quot; placeholder=&quot;Search&quot;&gt;
                            &lt;!--
                                搜索列表id两种方法：
                                   1.&lt;input type=&quot;text&quot; ng-model=&quot;search.id&quot; class=&quot;form-control&quot; placeholder=&quot;Search&quot;&gt;
                                   2. &lt;tr ng-repeat=&quot;product in produceDate | filter:{id:search}&quot;&gt;
                            --&gt;
                        &lt;/div&gt;
                    &lt;/form&gt;
                &lt;/div&gt;
        &lt;/nav&gt;
        &lt;table class=&quot;table&quot;&gt;
            &lt;thead&gt;
                &lt;tr&gt;
                    &lt;th ng-click=&quot;changeOrder(&apos;id&apos;)&quot; ng-class=&quot;{dropup:order === &apos;&apos;}&quot;&gt;
                        产品编号
                        &lt;span class=&quot;caret&quot; ng-class=&quot;{orderColor:orderType === &apos;id&apos;}&quot;&gt;&lt;/span&gt;
                    &lt;/th&gt;
                    &lt;th  ng-click=&quot;changeOrder(&apos;name&apos;)&quot; ng-class=&quot;{dropup:order === &apos;&apos;}&quot;&gt;
                        产品名称
                        &lt;span class=&quot;caret&quot; ng-class=&quot;{orderColor:orderType === &apos;name&apos;}&quot;&gt;&lt;/span&gt;
                    &lt;/th&gt;
                    &lt;th  ng-click=&quot;changeOrder(&apos;price&apos;)&quot; ng-class=&quot;{dropup:order === &apos;&apos;}&quot;&gt;
                        产品价钱
                        &lt;span class=&quot;caret&quot; ng-class=&quot;{orderColor:orderType === &apos;price&apos;}&quot;&gt;&lt;/span&gt;
                    &lt;/th&gt;
                &lt;/tr&gt;
            &lt;/thead&gt;
            &lt;tbody&gt;
                &lt;tr ng-repeat=&quot;product in produceDate | filter:search | orderBy:order+orderType&quot;&gt;&lt;!--filter:{id:search}--&gt;
                    &lt;td&gt;{{product.id}}&lt;/td&gt;
                    &lt;td&gt;{{product.name}}&lt;/td&gt;
                    &lt;td&gt;{{product.price | currency:'(RMB)'}}&lt;/td&gt;
                &lt;/tr&gt;
            &lt;/tbody&gt;
        &lt;/table&gt;

    &lt;/div&gt;

&lt;script type=&quot;text/javascript&quot; src=&quot;../angular/angular.min.js&quot;&gt;&lt;/script&gt;
&lt;script type=&quot;text/javascript&quot; src=&quot;productlist.js&quot;&gt;&lt;/script&gt;
&lt;/body&gt;
&lt;/html&gt;
</code></pre></li>
<li><p>productlist.js</p>
<pre><code>angular.module(&apos;product&apos;,[])
    .service(&apos;produceDate&apos;,function () {
        return[
            {
                id:3333,
                name:&apos;iphone&apos;,
                price:5400
            },
            {
                id:885,
                name:&apos;ipad&apos;,
                price:3420
            },
            {
                id:980,
                name:&apos;imac&apos;,
                price:15400
            },
            {
                id:1212,
                name:&apos;ipad air&apos;,
                price:2340
            },
            {
                id:3424,
                name:&apos;ipad mmini&apos;,
                price:2200
            }
        ]
    })
.controller(&apos;productController&apos;,function ($scope,produceDate) {
    $scope.produceDate = produceDate;
    $scope.orderType = &apos;id&apos;;
    $scope.order = &quot;-&quot;;
    $scope.changeOrder = function (type) {
        $scope.orderType = type;
        if($scope.order === &apos;&apos;){
            $scope.order = &apos;-&apos;;
        }else{
            $scope.order = &apos;&apos;;
        }
    }
});
</code></pre><h3 id="自定义过滤器-controllerProvider使用"><a href="#自定义过滤器-controllerProvider使用" class="headerlink" title="自定义过滤器$controllerProvider使用"></a><a name="filtercp">自定义过滤器$controllerProvider使用</a></h3><p><img src="http://i.imgur.com/q9ECtl2.png" alt=""></p>
<pre><code>&lt;div ng-app=&quot;myApps&quot;&gt;
    &lt;div ng-controller=&quot;firstControllers&quot;&gt;
        &lt;ul&gt;
            &lt;li ng-repeat=&quot;user in data | filterCity&quot;&gt;&lt;!--ng-repeat=&quot;user in data | filterAge&quot;--&gt;
                {{user.name}}
                {{user.age}}
                {{user.city}}
            &lt;/li&gt;
        &lt;/ul&gt;
     &lt;/div&gt;
&lt;/div&gt;
</code></pre></li>
</ul>
<hr>
<pre><code>angular.module(&apos;myApps&apos;,[],function ($filterProvider,$provide,$controllerProvider) {
    $provide.service(&apos;Data&apos;,function () {
        return [
            {
                name : &apos;张三&apos;,
                age : 20,
                city : &apos;上海&apos;
            },
            {
                name : &apos;李四&apos;,
                age : 30,
                city : &apos;北京&apos;
            }
        ];
    });
    $filterProvider.register(&apos;filterAge&apos;,function () {
        return function (obj) {
            var newObj = [];

            angular.forEach(obj,function (o) {
                if(o.age &gt; 20){
                    newObj.push(o);
                }
            });
            return newObj;
        }
    });
    $controllerProvider.register(&apos;firstControllers&apos;,function ($scope,Data) {
      console.log(Data)
       $scope.data = Data;
    })
})
.filter(&apos;filterCity&apos;,function () {
        return function (obj) {
            var newObj = [];

            angular.forEach(obj,function (o) {
                if(o.city === &apos;上海&apos;){
                    newObj.push(o);
                }
            });
            return newObj;
        }
});    
</code></pre><h3 id="控制器的合理使用、显示和隐示的依赖注入"><a href="#控制器的合理使用、显示和隐示的依赖注入" class="headerlink" title="控制器的合理使用、显示和隐示的依赖注入"></a><a name="ciocsh">控制器的合理使用、显示和隐示的依赖注入</a></h3><p><img src="http://i.imgur.com/6uAQu6V.png" alt=""></p>
<pre><code> &lt;div ng-app=&quot;myApp1&quot;&gt;
    &lt;div ng-controller=&quot;firstControllers&quot;&gt;
    &lt;/div&gt;
    &lt;div ng-controller=&quot;secondControllers&quot;&gt;
     &lt;/div&gt;
    &lt;div ng-controller=&quot;otherController&quot;&gt;
    &lt;/div&gt;
&lt;/div&gt;
------------------------------------------------
推荐使用显示依赖注入
angular.module(&apos;myApp1&apos;,[],[&apos;$filterProvider&apos;,&apos;$provide&apos;,&apos;$controllerProvider&apos;,function (a, b, c) {
    console.log(a,b,c);
}])
.factory(&apos;CustomService&apos;,function ($window) {
        console.log($window);
})
.factory(&apos;CustomService&apos;,[&apos;$window&apos;,function (a) {
    console.log(a);
}])
//隐示的依赖注入
.controller(&apos;firstControllers&apos;,function ($scope,CustomService){
    console.log(CustomService);
 })
//显示的依赖注入
.controller(&apos;secondControllers&apos;,[&apos;$scope&apos;,&apos;$filter&apos;,function (a,b) {
    console.log(b(&apos;json&apos;)([1,2,3,4,5]));
}]);
//全局控制器
function otherController(a) {
    console.log(a);
}
otherController.$inject = [&apos;$scope&apos;];
</code></pre><h3 id="内置渲染指令"><a href="#内置渲染指令" class="headerlink" title="内置渲染指令"></a><a name="binrendering">内置渲染指令</a></h3><p><img src="http://i.imgur.com/XtoRWnl.png" alt=""></p>
<ul>
<li>Angular内置指令<br><img src="http://i.imgur.com/nOl6PfL.png" alt=""><br><img src="http://i.imgur.com/o0UvLNB.png" alt=""><br><img src="http://i.imgur.com/eNFA7JY.png" alt=""><br><img src="http://i.imgur.com/UQtHcrS.png" alt=""></li>
<li><p>index.html</p>
<pre><code>&lt;!DOCTYPE html&gt;
&lt;html lang=&quot;en&quot;&gt;
&lt;head&gt;
    &lt;meta charset=&quot;UTF-8&quot;&gt;
    &lt;title&gt;Title&lt;/title&gt;
    &lt;style&gt;
        .red{
            color:red;
        }
    &lt;/style&gt;
&lt;/head&gt;
&lt;body&gt;
    &lt;div ng-app=&quot;myApp2&quot;&gt;
        &lt;div ng-controller=&quot;firstController1&quot;&gt;
            &lt;p&gt;{{ 1+1 }}&lt;/p&gt;
            &lt;p ng-bind=&quot;1+1&quot;&gt;2&lt;/p&gt;
            &lt;p ng-bind-template=&quot;{{1+1}}&quot;&gt;&lt;/p&gt;
            &lt;ul ng-class=&quot;{red:status}&quot; ng-init=&quot;cityArr = [&apos;上海&apos;,&apos;北京&apos;,&apos;杭州&apos;]&quot;&gt;
                &lt;li ng-class-even=&quot;&apos;偶数&apos;&quot; ng-class-odd=&quot;&apos;奇数&apos;&quot; ng-repeat=&quot;city in cityArr&quot;&gt;
                    &lt;span&gt;
                        index:{{$index}}
                    &lt;/span&gt;
                    &lt;span&gt;
                        first:{{$first}}
                    &lt;/span&gt;
                    &lt;span&gt;
                        middle:{{$middle}}
                    &lt;/span&gt;
                    &lt;span&gt;
                        last:{{$last}}
                    &lt;/span&gt;
                    &lt;span&gt;
                        {{city}}
                    &lt;/span&gt;
                &lt;/li&gt;
            &lt;/ul&gt;
            &lt;div ng-include=&quot;&apos;other.html&apos;&quot;&gt;&lt;/div&gt;
            &lt;button ng-click=&quot;changeStatus($event)&quot;&gt;切换状态&lt;/button&gt;
            {{status}}
            &lt;div ng-style=&quot;{color:&apos;blue&apos;,&apos;margin-top&apos;:&apos;20px&apos;}&quot; ng-hide=&quot;status&quot;&gt;
                ng-style
            &lt;/div&gt;
            &lt;div ng-style=&quot;defaultStyle&quot; ng-show=&quot;status&quot;&gt;
                ng-styleaa
            &lt;/div&gt;
            &lt;div ng-switch on=&quot;status&quot;&gt;
                &lt;li ng-switch-when=&quot;true&quot;&gt;true&lt;/li&gt;
                &lt;li ng-switch-when=&quot;false&quot;&gt;false&lt;/li&gt;
            &lt;/div&gt;
            &lt;img ng-src=&quot;{{src}}&quot; /&gt;
            &lt;div ng-if=&quot;status&quot;&gt;status show&lt;/div&gt;
         &lt;/div&gt;

    &lt;/div&gt;

&lt;script type=&quot;text/javascript&quot; src=&quot;../../angular/angular.min.js&quot;&gt;&lt;/script&gt;
&lt;script type=&quot;text/javascript&quot; src=&quot;index.js&quot;&gt;&lt;/script&gt;
&lt;/body&gt;
&lt;/html&gt;
</code></pre></li>
<li><p>other.html</p>
<pre><code>other html template
</code></pre></li>
<li><p>index.js</p>
<pre><code>angular.module(&apos;myApp2&apos;,[],function ($filterProvider,$provide,$controllerProvider) {

})
.controller(&apos;firstController1&apos;,function ($scope){
   $scope.status = false;
  $scope.changeStatus = function (event) {
   // console.log(event.target);
    //通过element转换成jQuery对象
    angular.element(event.target).html(&apos;切换状态为：&apos;+$scope.status);
     $scope.status=!$scope.status
    };
    $scope.defaultStyle = {
     color:&apos;red&apos;,
     &apos;margin-top&apos;:&apos;50px&apos;
    };
   $scope.src=&quot;http://www.runoob.com/wp-content/uploads/2014/06/angular.jpg&quot;
 });    
</code></pre></li>
</ul>
<h3 id="自定义指令-restrict、template等属性"><a href="#自定义指令-restrict、template等属性" class="headerlink" title="自定义指令 restrict、template等属性"></a><a name="retemp">自定义指令 restrict、template等属性</a></h3><p><img src="http://i.imgur.com/qCwY7GN.png" alt=""><br><img src="http://i.imgur.com/mE6qxiZ.png" alt=""><br><img src="http://i.imgur.com/vlhssEu.png" alt=""><br><img src="http://i.imgur.com/xn90D3h.png" alt=""><br><img src="http://i.imgur.com/H5QNeQZ.png" alt=""></p>
<pre><code>&lt;div ng-app=&quot;myApp2&quot;&gt;
          &lt;custom-tags&gt;&lt;/custom-tags&gt;
          &lt;div class=&quot;custom-tags&quot;&gt;&lt;/div&gt;
          &lt;div custom-tags&gt;&lt;/div&gt;
          &lt;!-- directive:custom-tags --&gt;
    &lt;/div&gt;    
---------------------------------------------
angular.module(&apos;myApp2&apos;,[],[&apos;$compileProvider&apos;,function ($compileProvider) {
    $compileProvider.directive(&apos;customTags&apos;,function () {
        return{
            restrict:&apos;ECAM&apos;,
            template:&apos;&lt;div&gt;customer-tags-html&lt;/div&gt;&apos;,
            replace:true
        }
    });
}])
//.directive(&apos;&apos;)
</code></pre><h3 id="自定义指令-templateUrl属性"><a href="#自定义指令-templateUrl属性" class="headerlink" title="自定义指令 templateUrl属性"></a><a name="templateUrl">自定义指令 templateUrl属性</a></h3><p><img src="http://i.imgur.com/Y7MUrqY.png" alt=""></p>
<pre><code> &lt;div ng-app=&quot;myApp2&quot;&gt;
        &lt;script type=&quot;text/ng-template&quot; id=&quot;customTags2&quot;&gt;
          &lt;div&gt;
              hello {{name}}
          &lt;/div&gt;
        &lt;/script&gt;
        &lt;div ng-controller=&quot;firstController&quot;&gt;
            &lt;custom-tags&gt;&lt;/custom-tags&gt;
            &lt;custom-tags2&gt;&lt;/custom-tags2&gt;
        &lt;/div&gt;

    &lt;/div&gt;
----------------------------------------
var myApp = angular.module(&apos;myApp2&apos;,[])
.directive(&apos;customTags&apos;,function () {
    return {
        restrict:&quot;ECAM&quot;,
        templateUrl:&apos;tmp/other.html&apos;,
        //当replace:true时  tempalte:&apos;1111&apos;; 错误   tempalte:&apos;&lt;div&gt;1111&lt;/div&gt;  正确&apos;;
        replace:true
    }
})
    .directive(&apos;customTags2&apos;,function () {
        return {
            restrict:&quot;ECAM&quot;,
            templateUrl:&apos;customTags2&apos;,
            replace:true
        }
    })
.controller(&apos;firstController&apos;,[&apos;$scope&apos;,function ($scope) {
    $scope.name = &apos;张三&apos;;
}])
===============================        
张三
hello 张三
</code></pre><h3 id="自定义指令transclude、priority等属性"><a href="#自定义指令transclude、priority等属性" class="headerlink" title="自定义指令transclude、priority等属性"></a><a name="tranPriority">自定义指令transclude、priority等属性</a></h3><p><img src="http://i.imgur.com/EqoVHDI.png" alt=""><br><img src="http://i.imgur.com/YeXvTo5.png" alt=""></p>
<pre><code>&lt;div ng-app=&quot;myApp2&quot;&gt;
        &lt;div ng-controller=&quot;firstController&quot;&gt;
            &lt;custom-tags&gt;123&lt;/custom-tags&gt;
            &lt;!--优先级 ng-repeat  1000--&gt;
            &lt;ul&gt;
                &lt;li ng-repeat=&quot;xx in xxx&quot; ng-click=&quot;xxxx&quot;&gt;&lt;/li&gt;
            &lt;/ul&gt;
            &lt;div custom-tags2 custom-tags3&gt;&lt;/div&gt;
        &lt;/div&gt;
    &lt;/div&gt;    
---------------------------------
var myApp = angular.module(&apos;myApp2&apos;,[])
.directive(&apos;customTags&apos;,function () {
    return {
        restrict:&quot;ECAM&quot;,
        template:&apos;&lt;div&gt;新数据&lt;span ng-transclude&gt;&lt;/span&gt;&lt;/div&gt;&apos;,
        //当replace:true时  tempalte:&apos;1111&apos;; 错误   tempalte:&apos;&lt;div&gt;1111&lt;/div&gt;  正确&apos;;
        replace:true,
        transclude:true
    }
})
 .directive(&apos;customTags2&apos;,function () {
        return {
            restrict:&quot;ECAM&quot;,
            template:&apos;&lt;div&gt;2&lt;/div&gt;&apos;,
            replace:true,
            priority:-1  //默认为0
        }
    })
.directive(&apos;customTags3&apos;,function () {
        return {
            restrict:&quot;ECAM&quot;,
            template:&apos;&lt;div&gt;3&lt;/div&gt;&apos;,
            replace:true,
            priority:0,
            //小于0的directive 都不会执行
            terminal:true
        }
    })
.controller(&apos;firstController&apos;,[&apos;$scope&apos;,function ($scope) {
    $scope.name = &apos;张三&apos;;
}])
</code></pre><h3 id="自定义指令-compile-link属性"><a href="#自定义指令-compile-link属性" class="headerlink" title="自定义指令 compile  link属性"></a><a name="compileLink">自定义指令 compile  link属性</a></h3><p><img src="http://i.imgur.com/sMMfJMT.png" alt=""><br><img src="http://i.imgur.com/WBcgCDr.png" alt=""><br><img src="http://i.imgur.com/kmLQHvx.png" alt=""><br><img src="http://i.imgur.com/7dvxqpG.png" alt=""></p>
<pre><code>&lt;div ng-app=&quot;myApp2&quot;&gt;
        &lt;div ng-controller=&quot;firstController&quot;&gt;
            &lt;!--
                1.div 转换为dom结构
                2.默认优先级为0，哪个先定义哪个先使用
            --&gt;
            &lt;div ng-repeat=&quot;user in users&quot; custom-tags custom-tags2&gt;

            &lt;/div&gt;
        &lt;/div&gt;
    &lt;/div&gt;
-----------------------------------------
var myApp = angular.module(&apos;myApp2&apos;,[])
.directive(&apos;customTags&apos;,function () {
        return {
            restrict:&quot;ECAM&quot;,
            template:&apos;&lt;div&gt;{{user.name}}&lt;/div&gt;&apos;,
            //当replace:true时  tempalte:&apos;1111&apos;; 错误   tempalte:&apos;&lt;div&gt;1111&lt;/div&gt;  正确&apos;;
            replace:true,
            compile:function (tElement,tAttrs,transclude) {
                tElement.append(angular.element(&apos;&lt;div&gt;{{user.name}}{{user.count}}&lt;/div&gt;&apos;));
                //编译阶段...
                console.log(&apos;customTags compile 编译阶段&apos;);
                return {
                    //表示在编译阶段之后，指令连接到子元素之前运行
                    pre:function preLink(scope,iElement,iAttrs,controller) {
                        console.log(&apos;customTags preLink...&apos;);
                    },
                    //表示在所有子元素指令都连接之后才运行
                    post:function postLink(scope,iElement,iAttrs,controller) {
                        iElement.on(&apos;click&apos;,function () {
                            scope.$apply(function () {
                                scope.user.name = &apos;click after&apos;;
                                scope.user.count = ++i;
                                //进行一次 脏检查
                            })

                        })
                        console.log(&apos;customTags all child directive link ...&apos;);
                    }
                }
                //可以直接返回postLink
                // return  function () {
                //     console.log(&apos;compile return fun&apos;);
                // }
            },
            //此link表示的就是 postLink
            link:function () {

            }
        }
    })
    .directive(&apos;customTags2&apos;,function () {
        return {
            restrict:&quot;ECAM&quot;,
            //当replace:true时  tempalte:&apos;1111&apos;; 错误   tempalte:&apos;&lt;div&gt;1111&lt;/div&gt;  正确&apos;;
            replace:true,
            compile:function (tElement,tAttrs,transclude) {
                //编译阶段...
                console.log(&apos;customTags2 compile 编译阶段&apos;);
                return {
                    //表示在编译阶段之后，指令连接到子元素之前运行
                    pre:function preLink() {
                        console.log(&apos;customTags2 preLink&apos;);
                    },
                    //表示在所有子元素指令都连接之后才运行
                    post:function postLink() {
                        console.log(&apos;customTags2 all child directive link ...&apos;);
                    }
                }
                //可以直接返回postLink
                // return  function () {
                //     console.log(&apos;compile return fun&apos;);
                // }
            },
            //此link表示的就是 postLink
            link:function () {

            }
        }
    })
.controller(&apos;firstController&apos;,[&apos;$scope&apos;,function ($scope) {
    $scope.users = [
        {
            id:10,
            name:&apos;张三&apos;
        },
        {
            id:20,
            name:&apos;李四&apos;
        }
    ];
}])        
</code></pre><h3 id="自定义指令-controller-amp-amp-link-等属性"><a href="#自定义指令-controller-amp-amp-link-等属性" class="headerlink" title="自定义指令 controller &amp;&amp; link 等属性"></a><a name="direContro">自定义指令 controller &amp;&amp; link 等属性</a></h3><p><img src="http://i.imgur.com/CIuGJAq.png" alt=""></p>
<pre><code> &lt;div ng-app=&quot;myApp2&quot;&gt;
    &lt;div ng-controller=&quot;firstController&quot;&gt;
        &lt;div book-list&gt;&lt;/div&gt;
    &lt;/div&gt;

&lt;/div&gt;
----------------------------------------
var myApp = angular.module(&apos;myApp2&apos;,[])
.directive(&apos;bookList&apos;,function () {
    return {
        restrict:&quot;ECAM&quot;,
        controller:function ($scope) {
            $scope.books = [
                {
                    name:&apos;php&apos;
                },
                {
                    name:&apos;javaScript&apos;
                },
                {
                    name:&apos;java&apos;
                }
            ];
            $scope.addBook = function () {
                alert(&apos;test&apos;);
            }
        },
        controllerAs:&apos;bookListController&apos;,
        template:&apos;&lt;ul&gt;&lt;li ng-repeat=&quot;book in books&quot;&gt;{{book.name}}&lt;/li&gt;&lt;/ul&gt;&apos;,
        replace:true,
        link:function (scope, iElement, iAttrs,bookListController) {
            iElement.on(&apos;click&apos;,bookListController.addBook())
        }
    }
})
.controller(&apos;firstController&apos;,[&apos;$scope&apos;,function ($scope) {

}])
</code></pre><h3 id="自定义指令-require-属性"><a href="#自定义指令-require-属性" class="headerlink" title="自定义指令 require 属性"></a><a name="direrequire">自定义指令 require 属性</a></h3><pre><code>&lt;div ng-app=&quot;myApp2&quot;&gt;
        &lt;div ng-controller=&quot;firstController&quot;&gt;
            &lt;div book-list&gt;&lt;/div&gt;
        &lt;/div&gt;
    &lt;/div&gt;
------------------------------------------
var myApp = angular.module(&apos;myApp2&apos;,[])
.directive(&apos;bookList&apos;,function () {
    return {
        restrict:&quot;ECAM&quot;,
        controller:function ($scope) {
            $scope.books = [
                {
                    name:&apos;php&apos;
                },
                {
                    name:&apos;javaScript&apos;
                },
                {
                    name:&apos;java&apos;
                }
            ];
            this.addBook = function () {
                //alert(&apos;a&apos;);
                $scope.$apply(function () {
                    $scope.books.push({
                        name:&apos;AngularJs&apos;
                    })
                })

            }
        },
        controllerAs:&apos;bookListController&apos;,
        template:&apos;&lt;div&gt;&lt;ul&gt;&lt;li ng-repeat=&quot;book in books&quot;&gt;{{book.name}}&lt;/li&gt;&lt;/ul&gt;&lt;book-add&gt;&lt;/book-add&gt;&lt;/div&gt;&apos;,
        replace:true,

    }
})
    .directive(&apos;bookAdd&apos;,function () {
        return{
            restrict:&quot;ECAM&quot;,
            require:&apos;^bookList&apos;,
            template:&apos;&lt;button type=&quot;botton&quot;&gt;添加&lt;/button&gt;&apos;,
            replace:true,
            link:function (scope, iElement, iAttrs, bookListController) {
                iElement.on(&apos;click&apos;,bookListController.addBook);
            }

        }
    })
.controller(&apos;firstController&apos;,[&apos;$scope&apos;,function ($scope) {

}])        
</code></pre><h3 id="自定义指令-scope-属性"><a href="#自定义指令-scope-属性" class="headerlink" title="自定义指令 scope 属性"></a><a name="direscope">自定义指令 scope 属性</a></h3><p><img src="http://i.imgur.com/vuVs7H7.png" alt=""><br><img src="http://i.imgur.com/BMJZfZx.png" alt=""></p>
<pre><code>&lt;div ng-controller=&quot;MyCtrl&quot;&gt;
        &lt;drink flavor=&quot;{{ctrlFlavor}}&quot;&gt;&lt;/drink&gt;
&lt;/div&gt;
-------------------------------
var myModule = angular.module(&quot;MyModule&quot;, []);
myModule.controller(&apos;MyCtrl&apos;, [&apos;$scope&apos;, function($scope){
    $scope.ctrlFlavor=&quot;百威&quot;;
}])
myModule.directive(&quot;drink&quot;, function() {
    return {
        restrict:&apos;AE&apos;,
        scope:{
            flavor:&apos;@&apos;
        },
        template:&quot;&lt;div&gt;{{flavor}}&lt;/div&gt;&quot;
        // ,
        // link:function(scope,element,attrs){
        //     scope.flavor=attrs.flavor;
        // }
    }
});
</code></pre><hr>
<p><img src="http://i.imgur.com/cRJbt9k.png" alt=""></p>
<pre><code>&lt;div ng-controller=&quot;MyCtrl&quot;&gt;
    Ctrl:
    &lt;br&gt;
    &lt;input type=&quot;text&quot; ng-model=&quot;ctrlFlavor&quot;&gt;
    &lt;br&gt;
    Directive:
    &lt;br&gt;
    &lt;drink flavor=&quot;ctrlFlavor&quot;&gt;&lt;/drink&gt;
&lt;/div&gt;
-------------------------------
var myModule = angular.module(&quot;MyModule&quot;, []);
myModule.controller(&apos;MyCtrl&apos;, [&apos;$scope&apos;, function($scope){
    $scope.ctrlFlavor=&quot;百威&quot;;
}])
myModule.directive(&quot;drink&quot;, function() {
    return {
        restrict:&apos;AE&apos;,
        scope:{
            flavor:&apos;=&apos;
        },
        template:&apos;&lt;input type=&quot;text&quot; ng-model=&quot;flavor&quot;/&gt;&apos;
    }
});        
</code></pre><hr>
<p><img src="http://i.imgur.com/8hGzovm.png" alt=""></p>
<pre><code>&lt;div ng-controller=&quot;MyCtrl&quot;&gt;
    &lt;greeting greet=&quot;sayHello(name)&quot;&gt;&lt;/greeting&gt;
    &lt;greeting greet=&quot;sayHello(name)&quot;&gt;&lt;/greeting&gt;
    &lt;greeting greet=&quot;sayHello(name)&quot;&gt;&lt;/greeting&gt;
&lt;/div&gt;
-------------------------------
var myModule = angular.module(&quot;MyModule&quot;, []);
myModule.controller(&apos;MyCtrl&apos;, [&apos;$scope&apos;, function($scope){
    $scope.sayHello=function(name){
        alert(&quot;Hello &quot;+name);
    }
}])
myModule.directive(&quot;greeting&quot;, function() {
    return {
        restrict:&apos;AE&apos;,
        scope:{
            greet:&apos;&amp;&apos;
        },
        template:&apos;&lt;input type=&quot;text&quot; ng-model=&quot;userName&quot; /&gt;&lt;br/&gt;&apos;+
                 &apos;&lt;button class=&quot;btn btn-default&quot; ng-click=&quot;greet({name:userName})&quot;&gt;Greeting&lt;/button&gt;&lt;br/&gt;&apos;
    }
});
</code></pre><hr>
<pre><code>&lt;div ng-app=&quot;myApp2&quot;&gt;
        &lt;div ng-controller=&quot;firstController&quot;&gt;
            {{books}}{{title}}
            &lt;div book-list parent-book=&quot;books&quot; parent-title=&quot;{{title}}&quot;&gt;&lt;/div&gt;&lt;!--books=&quot;books&quot;--&gt;
        &lt;/div&gt;
    &lt;/div&gt;
------------------------------------------------------
var myApp = angular.module(&apos;myApp2&apos;,[])
.directive(&apos;bookList&apos;,function () {
    return {
        restrict:&quot;ECAM&quot;,
        controller:function ($scope) {
           // console.log($scope.a());
           //&amp;books
            // $scope.books = $scope.a();
            //=books;
            // $scope.books = $scope.b;
            // $scope.b.push({name:&apos;nodejs&apos;});
            //使用简单数据类型的方法
            $scope.books = $scope.c;
        },
        //创建一个有继承链的独立作用域
        //scope:true,   //默认为false
       //当为对象的时候也会创建一个独立的作用域
        scope:{
            //将父元素books封装成一个a函数
            //a:&apos;&amp;books&apos;
            //双向绑定 bparentBooks属性对应的父作用域的表达式
            //b:&apos;=parentBook&apos;
            c:&apos;@parentTitle&apos;,

        },
        controllerAs:&apos;bookListController&apos;,
        template:&apos;&lt;div&gt;&lt;ul&gt;&lt;li ng-repeat=&quot;book in books&quot;&gt;{{book.name}}&lt;/li&gt;&lt;/ul&gt;&lt;/div&gt;&apos;,
        replace:true,

    }
})

.controller(&apos;firstController&apos;,[&apos;$scope&apos;,function ($scope) {
    console.log($scope);
    $scope.books = [
        {
            name:&apos;php&apos;
        },
        {
            name:&apos;javaScript&apos;
        },
        {
            name:&apos;java&apos;
        }
    ];
    $scope.title = &apos;张三&apos;;
}])
</code></pre><h3 id="自定义accordion指令"><a href="#自定义accordion指令" class="headerlink" title="自定义accordion指令"></a><a name="direAccordion">自定义accordion指令</a></h3><p><img src="http://i.imgur.com/NxaQNYV.png" alt=""></p>
<ul>
<li><p>index.html</p>
<pre><code>&lt;!DOCTYPE html&gt;
&lt;html lang=&quot;en&quot;&gt;
&lt;head&gt;
    &lt;meta charset=&quot;UTF-8&quot;&gt;
    &lt;meta name=&quot;viewport&quot; content=&quot;width=device-width, initial-scale=1&quot;&gt;
    &lt;title&gt;Title&lt;/title&gt;
    &lt;!-- 新 Bootstrap 核心 CSS 文件 &lt;link rel=&quot;stylesheet&quot; href=&quot;../css/bootstrap.min.css&quot;&gt; --&gt;
    &lt;link rel=&quot;stylesheet&quot; href=&quot;//cdn.bootcss.com/bootstrap/3.3.5/css/bootstrap.min.css&quot;&gt;
&lt;/head&gt;
&lt;body ng-app=&quot;myApp&quot;&gt;
    &lt;div class=&quot;container&quot; ng-controller=&quot;firstController&quot;&gt;
        &lt;kittencup-group&gt;
            &lt;kittencup-collapse ng-repeat=&quot;collapse in data&quot; heading=&quot;{{collapse.title}}&quot;&gt;
                {{collapse.content}}
            &lt;/kittencup-collapse&gt;
        &lt;/kittencup-group&gt;
    &lt;/div&gt;

&lt;script type=&quot;text/javascript&quot; src=&quot;../angular/angular.min.js&quot;&gt;&lt;/script&gt;
&lt;script type=&quot;text/javascript&quot; src=&quot;index.js&quot;&gt;&lt;/script&gt;
&lt;/body&gt;
&lt;/html&gt;
</code></pre></li>
<li><p>tmp/kittencupCollapse.html</p>
<pre><code>&lt;div class=&quot;panel panel-default&quot;&gt;
    &lt;div class=&quot;panel-heading&quot; ng-click=&quot;changeOpen()&quot;&gt;
        &lt;h4 class=&quot;panel-title&quot;&gt;
            &lt;a href=&quot;#&quot;&gt;{{heading}}&lt;/a&gt;
        &lt;/h4&gt;
    &lt;/div&gt;
    &lt;div class=&quot;panel-collapse&quot; ng-class=&quot;{collapse:!isOpen}&quot;&gt;
        &lt;div class=&quot;panel-body&quot; ng-transclude&gt;
    &lt;/div&gt;
&lt;/div&gt;
</code></pre><p></p>
</li>
<li><p>index.js</p>
<pre><code>angular.module(&apos;myApp&apos;,[])
        //数据
        .factory(&apos;Data&apos;,function () {
            return [
                {
                    title:&apos;nol&apos;,
                    content:&apos;nol-content&apos;
                },
                {
                    title:&apos;no2&apos;,
                    content:&apos;no2-content&apos;
                },
                {
                    title:&apos;no3&apos;,
                    content:&apos;no3-content&apos;
                }
            ];
        })
        //控制器
    .controller(&apos;firstController&apos;,[&apos;$scope&apos;,&apos;Data&apos;,function ($scope, Data) {
        $scope.data = Data;
    }])
        .directive(&apos;kittencupGroup&apos;,function () {
            return{
                restrict:&apos;E&apos;,
                replace:true,
                template:&apos;&lt;div class=&quot;panel-group&quot; ng-transclude&gt;&lt;/div&gt;&apos;,
                transclude:true,
                controllerAs:&apos;kittencupGroupController&apos;,
                controller:function () {
                    this.groups = [];
                    this.closeOtherCollapse = function (nowScope){
                        angular.forEach(this.groups,function (scope) {
                            if(scope !== nowScope){
                                scope.isOpen = false;
                            }
                        })
                    }
                }
            }
        })
        .directive(&apos;kittencupCollapse&apos;,function () {
            return{
                restrict:&apos;E&apos;,
                replace:true,
                require:&apos;^kittencupGroup&apos;,
                templateUrl:&apos;tmp/kittencupCollapse.html&apos;,
                scope:{
                    heading:&apos;@&apos;
                },
                link:function (scope,element,attrs,kittencupGroupController) {
                    scope.isOpen = false;
                    scope.changeOpen = function () {
                        scope.isOpen = !scope.isOpen;
                        kittencupGroupController.closeOtherCollapse(scope);
                    }
                    kittencupGroupController.groups.push(scope);
                },
                transclude:true
            }
        });
</code></pre></li>
</ul>
<h3 id="模块里constant、value、run方法"><a href="#模块里constant、value、run方法" class="headerlink" title="模块里constant、value、run方法"></a><a name="modelcvr">模块里constant、value、run方法</a></h3><p><img src="http://i.imgur.com/BSt9jmD.png" alt=""><br><img src="http://i.imgur.com/PzU4AId.png" alt=""><br><img src="http://i.imgur.com/uXYBvzM.png" alt=""></p>
<pre><code> &lt;div ng-app=&quot;myApp2&quot;&gt;
        &lt;div ng-controller=&quot;firstController&quot;&gt;

        &lt;/div&gt;
    &lt;/div&gt;
-----------------------------------------
var myApp = angular.module(&apos;myApp2&apos;,[])
.directive(&apos;bookList&apos;,[&apos;$provide&apos;,function ($provide) {
    //$provide.factory
    //$provide.service
    //$provide.constant
    //$provide.value;
}])
    .config(function (APIKEY) {
        console.log(APIKEY);
        //console.log(vension);  错误
    })
    //在configuration之后controller等其它服务之前
    .run(function () {
        console.log(&apos;run&apos;);
    })        
        //它只是可以注入任何方法
    .constant(&apos;APIKEY&apos;,&apos;xxxx&apos;)
    //只能注入controller...service  factory
    .value(&apos;vension&apos;,&apos;1.0.0&apos;)
.controller(&apos;firstController&apos;,[&apos;$scope&apos;,&apos;APIKEY&apos;,&apos;vension&apos;,function (APIKEY,vension) {
    console.log(APIKEY);
    console.log(vension);
    console.log(&apos;controller&apos;);
}])
</code></pre><h3 id="表单-Form、Text"><a href="#表单-Form、Text" class="headerlink" title=" 表单 Form、Text"></a><a name="fromText"> 表单 Form、Text</a></h3><p><img src="http://i.imgur.com/hYHp2rT.png" alt=""><br><img src="http://i.imgur.com/ksXWlYR.png" alt=""><br><img src="http://i.imgur.com/o6xymsa.png" alt=""><br><img src="http://i.imgur.com/Q80uwwP.png" alt=""><br>-index.html</p>
<pre><code>&lt;!DOCTYPE html&gt;
&lt;html lang=&quot;en&quot;&gt;
&lt;head&gt;
    &lt;meta charset=&quot;UTF-8&quot;&gt;
    &lt;title&gt;Title&lt;/title&gt;
    &lt;link rel=&quot;stylesheet&quot; href=&quot;//cdn.bootcss.com/bootstrap/3.3.5/css/bootstrap.min.css&quot;&gt;
&lt;/head&gt;
&lt;body&gt;
    &lt;div ng-app=&quot;myApp2&quot; style=&quot;margin-top: 100px;&quot;&gt;
        &lt;form name=&quot;myForm&quot; action=&quot;kittencup.php&quot; ng-controller=&quot;firstController&quot; class=&quot;container form-horizontal&quot;&gt;
            &lt;div class=&quot;form-group&quot; ng-class=&quot;{&apos;has-error&apos;:myForm.username.$dirty &amp;&amp; myForm.username.$invalid}&quot;&gt;
                &lt;label class=&quot;col-sm-2 control-label&quot;&gt;用户名&lt;/label&gt;
                &lt;div class=&quot;col-sm-10&quot; &gt;
                    &lt;input type=&quot;text&quot; autocomplete=&quot;off&quot; name=&quot;username&quot; ng-pattern=&quot;/^[a-zA-Z]{1}/&quot; ng-required=&quot;true&quot; ng-minlength=&quot;5&quot; ng-maxlength=&quot;10&quot; ng-model=&quot;data.username&quot; class=&quot;form-control&quot;  placeholder=&quot;用户名&quot;&gt;
                    &lt;div ng-show=&quot;myForm.username.$dirty &amp;&amp; myForm.username.$error.maxlength&quot; class=&quot;alert alert-danger help-block&quot;&gt;
                        用户名长度不能超过10位
                    &lt;/div&gt;
                    &lt;div ng-show=&quot;myForm.username.$dirty &amp;&amp; myForm.username.$error.minlength&quot; class=&quot;alert alert-danger help-block&quot;&gt;
                        用户名长度不能小于5位
                    &lt;/div&gt;
                    &lt;div ng-show=&quot;myForm.username.$dirty &amp;&amp; myForm.username.$error.pattern&quot; class=&quot;alert alert-danger help-block&quot;&gt;
                        用户名必须已英文字母开始
                    &lt;/div&gt;
                &lt;/div&gt;
            &lt;/div&gt;
            &lt;div class=&quot;form-group&quot; ng-class=&quot;{&apos;has-error&apos;:myForm.password.$dirty &amp;&amp; myForm.password.$invalid}&quot;&gt;
                &lt;label class=&quot;col-sm-2 control-label&quot;&gt;密  码&lt;/label&gt;
                &lt;div class=&quot;col-sm-10&quot; &gt;
                    &lt;input type=&quot;password&quot; autocomplete=&quot;off&quot; name=&quot;password&quot;  ng-required=&quot;true&quot; ng-minlength=&quot;5&quot; ng-maxlength=&quot;10&quot; ng-model=&quot;data.password&quot; class=&quot;form-control&quot;  placeholder=&quot;密  码&quot;&gt;
                    &lt;div ng-show=&quot;myForm.password.$dirty &amp;&amp; myForm.password.$error.maxlength&quot; class=&quot;alert alert-danger help-block&quot;&gt;
                        密码长度不能超过10位
                    &lt;/div&gt;
                    &lt;div ng-show=&quot;myForm.password.$dirty &amp;&amp; myForm.password.$error.minlength&quot; class=&quot;alert alert-danger help-block&quot;&gt;
                        密码长度不能小于5位
                    &lt;/div&gt;
                &lt;/div&gt;
            &lt;/div&gt;
            &lt;div class=&quot;form-group&quot; ng-class=&quot;{&apos;has-error&apos;:myForm.passwordConfirm.$dirty &amp;&amp; myForm.passwordConfirm.$invalid}&quot;&gt;
                &lt;label class=&quot;col-sm-2 control-label&quot;&gt;确认密码&lt;/label&gt;
                &lt;div class=&quot;col-sm-10&quot; &gt;
                    &lt;input type=&quot;password&quot; autocomplete=&quot;off&quot; name=&quot;passwordConfirm&quot;  ng-required=&quot;true&quot;  ng-model=&quot;data.passwordConfirm&quot; class=&quot;form-control&quot;  placeholder=&quot;确认密码&quot;&gt;
                    &lt;div ng-show=&quot;myForm.passwordConfirm.$dirty &amp;&amp; myForm.password.$dirty &amp;&amp; myForm.passwordConfirm.$dirty &amp;&amp; data.password !== data.passwordConfirm&quot; class=&quot;alert alert-danger help-block&quot;&gt;
                       密码和确认密码不一致
                    &lt;/div&gt;
                &lt;/div&gt;
            &lt;/div&gt;
            &lt;div class=&quot;form-group&quot; ng-class=&quot;{&apos;has-error&apos;:myForm.email.$dirty &amp;&amp; myForm.email.$invalid}&quot;&gt;
                &lt;label class=&quot;col-sm-2 control-label&quot;&gt;邮  箱&lt;/label&gt;
                &lt;div class=&quot;col-sm-10&quot; &gt;
                    &lt;input type=&quot;email&quot; autocomplete=&quot;off&quot; name=&quot;email&quot;  ng-required=&quot;true&quot; ng-minlength=&quot;5&quot; ng-maxlength=&quot;30&quot; ng-model=&quot;data.email&quot; class=&quot;form-control&quot;  placeholder=&quot;邮  箱&quot;&gt;
                    &lt;div ng-show=&quot;myForm.email.$dirty &amp;&amp; myForm.email.$error.maxlength&quot; class=&quot;alert alert-danger help-block&quot;&gt;
                        邮箱长度不能超过30位
                    &lt;/div&gt;
                    &lt;div ng-show=&quot;myForm.email.$dirty &amp;&amp; myForm.email.$error.minlength&quot; class=&quot;alert alert-danger help-block&quot;&gt;
                        邮箱长度不能小于5位
                    &lt;/div&gt;
                    &lt;div ng-show=&quot;myForm.email.$dirty &amp;&amp; myForm.email.$error.email&quot; class=&quot;alert alert-danger help-block&quot;&gt;
                        邮箱格式不正确
                    &lt;/div&gt;
                &lt;/div&gt;
            &lt;/div&gt;
            &lt;div class=&quot;form-group&quot; ng-class=&quot;{&apos;has-error&apos;:myForm.blog.$dirty &amp;&amp; myForm.blog.$invalid}&quot;&gt;
                &lt;label class=&quot;col-sm-2 control-label&quot;&gt;博客网址&lt;/label&gt;
                &lt;div class=&quot;col-sm-10&quot; &gt;
                    &lt;input type=&quot;url&quot; autocomplete=&quot;off&quot; name=&quot;blog&quot;  ng-required=&quot;true&quot; ng-minlength=&quot;5&quot; ng-maxlength=&quot;30&quot; ng-model=&quot;data.blog&quot; class=&quot;form-control&quot;  placeholder=&quot;博客网址&quot;&gt;
                    &lt;div ng-show=&quot;myForm.blog.$dirty &amp;&amp; myForm.blog.$error.maxlength&quot; class=&quot;alert alert-danger help-block&quot;&gt;
                        网址长度不能超过30位
                    &lt;/div&gt;
                    &lt;div ng-show=&quot;myForm.blog.$dirty &amp;&amp; myForm.blog.$error.minlength&quot; class=&quot;alert alert-danger help-block&quot;&gt;
                        网址长度不能小于5位
                    &lt;/div&gt;
                    &lt;div ng-show=&quot;myForm.blog.$dirty &amp;&amp; myForm.blog.$error.url&quot; class=&quot;alert alert-danger help-block&quot;&gt;
                        网址格式不正确
                    &lt;/div&gt;
                &lt;/div&gt;
            &lt;/div&gt;
            &lt;div class=&quot;form-group&quot; ng-class=&quot;{&apos;has-error&apos;:myForm.age.$dirty &amp;&amp; myForm.age.$invalid}&quot;&gt;
                &lt;label class=&quot;col-sm-2 control-label&quot;&gt;年  龄&lt;/label&gt;
                &lt;div class=&quot;col-sm-10&quot; &gt;
                    &lt;input type=&quot;number&quot; autocomplete=&quot;off&quot; name=&quot;age&quot; min=&quot;10&quot; max=&quot;99&quot;  ng-required=&quot;true&quot;  ng-model=&quot;data.age&quot; class=&quot;form-control&quot;  placeholder=&quot;年  龄&quot;&gt;
                    &lt;div ng-show=&quot;myForm.age.$dirty &amp;&amp; myForm.age.$error.max&quot; class=&quot;alert alert-danger help-block&quot;&gt;
                        年龄不能超过100岁
                    &lt;/div&gt;
                    &lt;div ng-show=&quot;myForm.age.$dirty &amp;&amp; myForm.age.$error.min&quot; class=&quot;alert alert-danger help-block&quot;&gt;
                        年龄不能小于10岁
                    &lt;/div&gt;
                &lt;/div&gt;
            &lt;/div&gt;
            &lt;div class=&quot;form-group&quot;&gt;
                &lt;label class=&quot;col-sm-2 control-label&quot;&gt;性别&lt;/label&gt;
                &lt;div class=&quot;col-sm-10&quot;&gt;
                    &lt;label class=&quot;radio-inline&quot;&gt;
                        &lt;input type=&quot;radio&quot; name=&quot;sex&quot; ng-model=&quot;data.sex&quot; value=&quot;1&quot; /&gt;男
                    &lt;/label&gt;
                    &lt;label class=&quot;radio-inline&quot;&gt;
                        &lt;input type=&quot;radio&quot;  name=&quot;sex&quot; ng-model=&quot;data.sex&quot; value=&quot;0&quot; /&gt;女
                    &lt;/label&gt;
                &lt;/div&gt;
            &lt;/div&gt;
            &lt;div class=&quot;form-group&quot;&gt;
                &lt;label class=&quot;col-sm-2 control-label&quot;&gt;爱好&lt;/label&gt;
                &lt;div class=&quot;col-sm-10&quot;&gt;
                    &lt;label class=&quot;checkbox-inline&quot; ng-repeat=&quot;hobby in hobbies&quot; &gt;
                        &lt;input type=&quot;checkbox&quot; name=&quot;hobby[]&quot; ng-checked=&quot;data.hobbies === undefined ? false : data.hobbies.indexOf(hobby.id) !== -1&quot; ng-click=&quot;toggleHobbySelection(hobby.id)&quot; /&gt;{{hobby.name}}
                    &lt;/label&gt;
                &lt;/div&gt;
            &lt;/div&gt;
            &lt;div class=&quot;form-group&quot;&gt;
                &lt;label class=&quot;col-sm-2 control-label&quot;&gt;出生地&lt;/label&gt;
                &lt;div class=&quot;col-sm-3&quot;&gt;
                       &lt;select  class=&quot;form-control&quot; ng-model=&quot;data.province&quot; ng-change=&quot;data.area = false&quot; ng-options=&quot;x.id as x.name for x in cities | cityFilter:0&quot;&gt;&lt;/select&gt;
                &lt;/div&gt;
                &lt;div class=&quot;col-sm-3&quot;&gt;
                    &lt;select  class=&quot;form-control&quot; ng-show=&quot;data.province&quot; ng-model=&quot;data.area&quot; ng-options=&quot;x.id as x.name for x in cities | cityFilter:data.province&quot;&gt;&lt;/select&gt;
                &lt;/div&gt;
                &lt;div class=&quot;col-sm-3&quot;&gt;
                    &lt;select  class=&quot;form-control&quot; ng-show=&quot;data.province &amp;&amp; data.area&quot; ng-model=&quot;data.city&quot; ng-options=&quot;x.id as x.name for x in cities | cityFilter:data.area&quot;&gt;&lt;/select&gt;
                &lt;/div&gt;
            &lt;/div&gt;
            &lt;div class=&quot;form-group&quot;&gt;
                &lt;div class=&quot;col-sm-offset-2 col-sm-10&quot;&gt;
                    &lt;button type=&quot;submit&quot; class=&quot;btn btn-default&quot; ng-disabled=&quot;myForm.$invalid || data.hobbies === undefined || data.hobbies ===0 &quot;&gt;注册&lt;/button&gt;
                    &lt;button type=&quot;reset&quot; class=&quot;btn btn-default&quot; ng-click=&quot;reset()&quot;&gt;重置&lt;/button&gt;

                &lt;/div&gt;
            &lt;/div&gt;
        &lt;/form&gt;
    &lt;/div&gt;


&lt;script type=&quot;text/javascript&quot; src=&quot;../../angular/angular.min.js&quot;&gt;&lt;/script&gt;
&lt;script type=&quot;text/javascript&quot; src=&quot;index.js&quot;&gt;&lt;/script&gt;
&lt;/body&gt;
&lt;/html&gt;
</code></pre><ul>
<li><p>index.js</p>
<pre><code>var myApp = angular.module(&apos;myApp2&apos;,[])
    .filter(&apos;cityFilter&apos;,function () {
        return function (data, parent) {
            var filterData = [];
            angular.forEach(data,function (obj) {
                if(obj.parent == parent){
                    filterData.push(obj);
                }
            });
            return filterData;
        }
    })
.controller(&apos;firstController&apos;,[&apos;$scope&apos;,function ($scope) {
   var that = this;
    $scope.hobbies = [
        {
            id:1,
            name:&apos;玩游戏&apos;
        },
        {
            id:2,
            name:&apos;写代码&apos;
        },
        {
            id:3,
            name:&apos;睡觉&apos;
        }
    ];
    $scope.cities = [
        {
            name:&apos;上海&apos;,
            parent:0,
            id:1
        },
        {
            name:&apos;上海市&apos;,
            parent:1,
            id:2
        },
        {
            name:&apos;徐汇区&apos;,
            parent:2,
            id:8
        },
        {
            name:&apos;长宁区&apos;,
            parent:2,
            id:3
        },
        {
            name:&apos;北京&apos;,
            parent:0,
            id:4
        },
        {
            name:&apos;北京市&apos;,
            parent:4,
            id:5
        },
        {
            name:&apos;东城区&apos;,
            parent:5,
            id:6
        },
        {
            name:&apos;丰台区&apos;,
            parent:5,
            id:7
        },
        {
            name:&apos;浙江&apos;,
            parent:0,
            id:9
        },
        {
            name:&apos;杭州&apos;,
            parent:9,
            id:100
        },
        {
            name:&apos;宁波&apos;,
            parent:9,
            id:11
        },
        {
            name:&apos;西湖区&apos;,
            parent:100,
            id:12
        },
        {
            name:&apos;北仑区&apos;,
            parent:11,
            id:13
        }
    ];
    $scope.data = {
        hobbies:[1,2],
        city:3
    };
    //先保留一份默认值
    $scope.oriData = angular.copy($scope.data);
    $scope.reset = function () {
        $scope.data = angular.copy($scope.oriData);
        that.initCity();
        $scope.myForm.$setPristine();
    }
    //让车市关联使用
    this.findCityId =function (parent) {
        var parentId;
        angular.forEach($scope.cities,function (city) {
            if(city.id === parent){
                parentId = city.parent;
                return;
            }
        });
        return parentId;
    };
    this.initCity = function () {
        if($scope.data.city !== undefined){
            $scope.data.area = this.findCityId($scope.data.city);
            $scope.data.province = this.findCityId($scope.data.area);
        };
    };
    //第一次打开页面，需要初始化一下
    this.initCity.call(this);
    $scope.toggleHobbySelection = function (id) {
       var index = -1;
        if($scope.data.hobbies === undefined){
            $scope.data.hobbies = [];
        }else{
            index = $scope.data.hobbies.indexOf(id);
        }

        if(index === -1){
            $scope.data.hobbies.push(id);
        }else{
            $scope.data.hobbies.splice(index,1);
        }
        console.log($scope.data.hobbies);
    }
}]);
</code></pre></li>
</ul>
<h3 id="自定义表单验证"><a href="#自定义表单验证" class="headerlink" title="自定义表单验证"></a><a name="diremodels">自定义表单验证</a></h3><p><img src="http://i.imgur.com/7Onrb9b.png" alt=""><br><img src="http://i.imgur.com/jlsbv5c.png" alt=""></p>
<pre><code> &lt;input type=&quot;number&quot; name=&quot;even&quot; class=&quot;form-group&quot; placeholder=&quot;偶数&quot; ng-model=&quot;data.even&quot; even&gt;
&lt;div ng-show=&quot;myForm.even.$error.even&quot; class=&quot;alert alert-danger help-block&quot;&gt;
                数字必须是偶数
            &lt;/div&gt;
---------------------------------
  .directive(&apos;even&apos;,function () {
    return {
        require:&apos;ngModel&apos;,
        link:function (scop, elem, attrs, ngModelController) {
            ngModelController.$parsers.push(function (viewValue) {
                if(viewValue %2 ===0){
                    ngModelController.$setValidity(&apos;even&apos;,true);
                }else{
                    ngModelController.$setValidity(&apos;even&apos;,false);
                }
                return viewValue;
            });
        }
    }
})
</code></pre><hr>
<pre><code> &lt;input type=&quot;text&quot; name=&quot;even&quot; class=&quot;form-group&quot; placeholder=&quot;偶数&quot; ng-model=&quot;data.even&quot; even&gt;
            &lt;input type=&quot;text&quot; name=&quot;even&quot; class=&quot;form-group&quot; placeholder=&quot;偶数&quot; ng-model=&quot;data.even&quot; even&gt;
--------------------------------------
.directive(&apos;even&apos;,function () {
        return {
            require:&apos;ngModel&apos;,
            link:function (scop, elem, attrs, ngModelController) {
                ngModelController.$formatters.push(function (modelValue) {
                    return modelValue + &apos;kittencup&apos;;
                })
            }
        }
    })
</code></pre><p><img src="http://i.imgur.com/5W7XKpu.png" alt=""></p>
<pre><code>&lt;custom-tags-area ng-model=&quot;data.introduce&quot;&gt;&lt;/custom-tags-area&gt;
&lt;custom-tags-area ng-model=&quot;data.introduce&quot;&gt;&lt;/custom-tags-area&gt;    
</code></pre><hr>
<pre><code>   .directive(&apos;customTagsArea&apos;,function () {                                                    
    return {                                                                                 
        restrict:&apos;E&apos;,                                                                        
        template:&apos;&lt;div contenteditable=&quot;true&quot;&gt;&lt;/div&gt;&apos;,                                       
        replace:true,                                                                        
        require:&apos;ngModel&apos;,                                                                   
        link:function (scope, elem, attrs, ngModelController) {                              
            //  console.log(&quot;viewValue=&quot;+scope.data.introduce)     //viewValue=undefined     
            //view-&gt;model                                                                    
            elem.on(&apos;keyup&apos;,function () {                                                    
                scope.$apply(function () {                                                   
                    ngModelController.$setViewValue(elem.html());                            
                    //console.log(scope.data.introduce) ;                                    
                            console.log(ngModelController.$viewValue)                        
                })                                                                           
            });                                                                              
            ngModelController.$render = function () {                                        
                elem.html(ngModelController.$viewValue);                                     
            }                                                                                
        }                                                                                    
    }                                                                                        
})                                                                                           
</code></pre><h3 id="路由route"><a href="#路由route" class="headerlink" title="路由route"></a><a name="ngroute">路由route</a></h3><pre><code>&lt;!--index.html&gt;
&lt;div ui-view&gt;&lt;/div&gt;   
--------------------------------------    
&lt;!--home.html&gt;
&lt;div class=&quot;container&quot;&gt;  
    &lt;div ui-view=&quot;main&quot;&gt;&lt;/div&gt;
&lt;/div&gt;
-------------------------------------- 
routerApp.config(function($stateProvider, $urlRouterProvider) {
    $urlRouterProvider.otherwise(&apos;/index&apos;);
    $stateProvider
        .state(&apos;index&apos;, {
            url: &apos;/index&apos;,
            views: {
                &apos;&apos;: {
                    templateUrl: &apos;tpls/home.html&apos;
                },
                &apos;main@index&apos;: {
                    templateUrl: &apos;tpls/loginForm.html&apos;
                }
            }
        })
})
-------------------------------------
&lt;!--loginForm.html--&gt;
&lt;form class=&quot;form-horizontal&quot; role=&quot;form&quot;&gt;
    &lt;div class=&quot;form-group&quot;&gt;
                &lt;div class=&quot;col-md-offset-2 col-md-10&quot;&gt;
                    &lt;a ui-sref=&quot;booklist({bookType:0})&quot; class=&quot;btn btn-success btn-lg&quot;&gt;登录&lt;/a&gt;
                    &lt;button class=&quot;btn btn-default btn-lg&quot; ng-click=&quot;setFormData()&quot;&gt;注册&lt;/button&gt;
                &lt;/div&gt;
            &lt;/div&gt;
&lt;/form&gt;
-------------------------------------
 .state(&apos;booklist&apos;, {
    url: &apos;/{bookType:[0-9]{1,4}}&apos;,
    views: { //注意这里的写法，当一个页面上带有多个ui-view的时候如何进行命名和视图模板的加载动作
        &apos;&apos;: {
            templateUrl: &apos;tpls/bookList.html&apos;
        },
        &apos;booktype@booklist&apos;: {
            templateUrl: &apos;tpls/bookType.html&apos;
        },
        &apos;bookgrid@booklist&apos;: {
            templateUrl: &apos;tpls/bookGrid.html&apos;
        }
    }
})
-----------------------------------------
&lt;!--loginForm.html--&gt;
&lt;a ui-sref=&quot;booklist({bookType:0})&quot; class=&quot;btn btn-success btn-lg&quot;&gt;登录&lt;/a&gt;

bookList.html        
&lt;div ui-view&gt;                &lt;!-- index.html --&gt;
    &lt;div class=&quot;container&quot;&gt; &lt;!-- bookList.htm --&gt;
        &lt;div class=&quot;row&quot;&gt;
            &lt;div class=&quot;col-md-3&quot;&gt;
                &lt;div ui-view=&quot;booktype&quot;&gt;
                    &lt;!-- 书籍类型加载中... --&gt;
                    ---------------------&lt;!--  bookType.html --&gt;-----------------------------
                    &lt;div class=&quot;row&quot;&gt;            
                        &lt;div class=&quot;col-md-12&quot;&gt;
                            &lt;div class=&quot;list-group&quot;&gt;
                                &lt;a href=&quot;javascript:void(0);&quot; class=&quot;list-group-item active&quot;&gt;
                                    书籍类型
                                &lt;/a&gt;
                                &lt;a ui-sref=&quot;booklist({bookType:0})&quot; class=&quot;list-group-item&quot;&gt;全部&lt;/a&gt;
                                &lt;a ui-sref=&quot;booklist({bookType:1})&quot; class=&quot;list-group-item&quot;&gt;计算机&lt;/a&gt;
                                &lt;a ui-sref=&quot;booklist({bookType:2})&quot; class=&quot;list-group-item&quot;&gt;金融&lt;/a&gt;
                                &lt;a ui-sref=&quot;booklist({bookType:3})&quot; class=&quot;list-group-item&quot;&gt;哲学&lt;/a&gt;
                                &lt;a ui-sref=&quot;booklist({bookType:4})&quot; class=&quot;list-group-item&quot;&gt;高端办公&lt;/a&gt;
                            &lt;/div&gt;
                        &lt;/div&gt;
                    &lt;/div&gt;
                &lt;/div&gt;            
                ------------------------&lt;!-- end of bookType.html --&gt;--------------------------
            &lt;/div&gt;
            &lt;div class=&quot;col-md-9&quot;&gt;
                &lt;div ui-view=&quot;bookgrid&quot;&gt;
                    书籍列表加载中...
                    ---------------------&lt;!--  bookGrid.html --&gt;-----------------------------
                    div ng-controller=&quot;BookListCtrl&quot;&gt;
                        &lt;div class=&quot;row&quot;&gt;
                            &lt;div class=&quot;col-md-12&quot;&gt;
                                &lt;a ui-sref=&quot;addbook&quot; class=&quot;btn btn-primary&quot;&gt;新增书籍&lt;/a&gt;
                            &lt;/div&gt;
                        &lt;/div&gt;
                        &lt;div class=&quot;row&quot;&gt;
                            &lt;div class=&quot;col-md-12&quot;&gt;
                                &lt;div&gt;
                                    &lt;div class=&quot;gridStyle&quot; ng-grid=&quot;gridOptions&quot;&gt;
                                    &lt;/div&gt;
                                &lt;/div&gt;
                            &lt;/div&gt;
                        &lt;/div&gt;
                    &lt;/div&gt;
                    ------------------------&lt;!-- end of bookGrid.html --&gt;--------------------------
                &lt;/div&gt;
            &lt;/div&gt;
        &lt;/div&gt;
    &lt;/div&gt;                &lt;!-- end of bookList.htm --&gt;
&lt;/div&gt;                    &lt;!-- end of index.html --&gt;
--------------------------------------------
&lt;a ui-sref=&quot;booklist({bookType:0})&quot; class=&quot;btn btn-success btn-lg&quot;&gt;登录&lt;/a&gt;
 .state(&apos;booklist&apos;, {
    url: &apos;/{bookType:[0-9]{1,4}}&apos;,
    views: { //注意这里的写法，当一个页面上带有多个ui-view的时候如何进行命名和视图模板的加载动作
        &apos;&apos;: {
            templateUrl: &apos;tpls/bookList.html&apos;
        }
    })
----------------------------------------------
cellTemplate: &apos;&lt;div&gt;&lt;a ui-sref=&quot;bookdetail({bookId:row.getProperty(col.field)})&quot; id=&quot;{{row.getProperty(col.field)}}&quot;&gt;详情&lt;/a&gt;&lt;/div&gt;&apos;
-----------------------------------        
.state(&apos;bookdetail&apos;, {
    url: &apos;/bookdetail/:bookId&apos;, //注意这里在路由中传参数的方式
    templateUrl: &apos;tpls/bookDetail.html&apos;
})
</code></pre><h3 id="templateCache"><a href="#templateCache" class="headerlink" title="$templateCache"></a><a name="templateCache">$templateCache</a></h3><pre><code>var myModule = angular.module(&quot;MyModule&quot;, []);
//注射器加载完所有模块时，此方法执行一次
myModule.run(function($templateCache){
    $templateCache.put(&quot;hello.html&quot;,&quot;&lt;div&gt;Hello everyone!!!!!!&lt;/div&gt;&quot;);
});

myModule.directive(&quot;hello&quot;, function($templateCache) {
    return {
        restrict: &apos;AECM&apos;,
        template: $templateCache.get(&quot;hello.html&quot;),
        replace: true
    }
});
---------------------------------------
&lt;body&gt;
    &lt;hello&gt;&lt;/hello&gt;
&lt;/body&gt;
</code></pre><h3 id="complie与link"><a href="#complie与link" class="headerlink" title="complie与link"></a><a name="templateCache">complie与link</a></h3><p><img src="http://i.imgur.com/CeWuYy6.png" alt=""></p>
<h3 id="鼠标滑动引起后台控制"><a href="#鼠标滑动引起后台控制" class="headerlink" title="鼠标滑动引起后台控制"></a><a name="mouseenter">鼠标滑动引起后台控制</a></h3><pre><code>&lt;div ng-controller=&quot;MyCtrl&quot;&gt;
    &lt;loader howToLoad=&quot;loadData()&quot;&gt;滑动加载&lt;/loader&gt;
&lt;/div&gt;
&lt;div ng-controller=&quot;MyCtrl2&quot;&gt;
    &lt;loader howToLoad=&quot;loadData2()&quot;&gt;滑动加载&lt;/loader&gt;
&lt;/div&gt;
------------------------------------------
var myModule = angular.module(&quot;MyModule&quot;, []);
myModule.controller(&apos;MyCtrl&apos;, [&apos;$scope&apos;, function($scope){
    $scope.loadData=function(){
        console.log(&quot;加载数据中...&quot;);
    }
}]);
myModule.controller(&apos;MyCtrl2&apos;, [&apos;$scope&apos;, function($scope){
    $scope.loadData2=function(){
        console.log(&quot;加载数据中...22222&quot;);
    }
}]);
myModule.directive(&quot;loader&quot;, function() {
    return {
        restrict:&quot;AE&quot;,
        link:function(scope,element,attrs){
            element.bind(&apos;mouseenter&apos;, function(event) {
                //scope.loadData();
                // scope.$apply(&quot;loadData()&quot;);
                // 注意这里的坑，howToLoad会被转换成小写的howtoload
                scope.$apply(attrs.howtoload);//调用属性所指定的方法
            });
        }
    } 
});
</code></pre><h3 id="鼠标滑动之动感超人"><a href="#鼠标滑动之动感超人" class="headerlink" title="鼠标滑动之动感超人"></a><a name="mouseenterSuperMan">鼠标滑动之动感超人</a></h3><p><img src="http://i.imgur.com/tg5eXFa.png" alt=""></p>
<pre><code>&lt;div class=&quot;row&quot;&gt;
        &lt;div class=&quot;col-md-3&quot;&gt;
            &lt;superman strength&gt;动感超人---力量&lt;/superman&gt;
        &lt;/div&gt;
    &lt;/div&gt;
    &lt;div class=&quot;row&quot;&gt;
        &lt;div class=&quot;col-md-3&quot;&gt;
            &lt;superman strength speed&gt;动感超人2---力量+敏捷&lt;/superman&gt;
        &lt;/div&gt;
    &lt;/div&gt;
    &lt;div class=&quot;row&quot;&gt;
        &lt;div class=&quot;col-md-3&quot;&gt;
            &lt;superman strength speed light&gt;动感超人3---力量+敏捷+发光&lt;/superman&gt;
        &lt;/div&gt;
    &lt;/div&gt;
------------------------------------------
var myModule = angular.module(&quot;MyModule&quot;, []);
myModule.directive(&quot;superman&quot;, function() {
    return {
        scope: {},
        restrict: &apos;AE&apos;,
        controller: function($scope) {
            $scope.abilities = [];
            this.addStrength = function() {
                $scope.abilities.push(&quot;strength&quot;);
            };
            this.addSpeed = function() {
                $scope.abilities.push(&quot;speed&quot;);
            };
            this.addLight = function() {
                $scope.abilities.push(&quot;light&quot;);
            };
        },
        link: function(scope, element, attrs) {
            element.addClass(&apos;btn btn-primary&apos;);
            element.bind(&quot;mouseenter&quot;, function() {
                console.log(scope.abilities);
            });
        }
    }
});
myModule.directive(&quot;strength&quot;, function() {
    return {
        require: &apos;^superman&apos;,
        link: function(scope, element, attrs, Ctrl) {//第四个参数代表父类的控制器controller
            Ctrl.addStrength();
        }
    }
});
myModule.directive(&quot;speed&quot;, function() {
    return {
        require: &apos;^superman&apos;,
        link: function(scope, element, attrs, supermanCtrl) {
            supermanCtrl.addSpeed();
        }
    }
});
myModule.directive(&quot;light&quot;, function() {
    return {
        require: &apos;^superman&apos;,
        link: function(scope, element, attrs, supermanCtrl) {
            supermanCtrl.addLight();
        }
    }
});
</code></pre>
      
    </div>

    <div>
      
        

      
    </div>

    <div>
      
        

      
    </div>

    <div>
      
        

      
    </div>

    <footer class="post-footer">
      
        <div class="post-tags">
          
            <a href="/tags/angularJS/" rel="tag"># angularJS</a>
          
        </div>
      

      
        
      

      
        <div class="post-nav">
          <div class="post-nav-next post-nav-item">
            
          </div>

          <span class="post-nav-divider"></span>

          <div class="post-nav-prev post-nav-item">
            
              <a href="/2018/09/03/MachineLearning/(K-Nearest Neighbor)KNN/" rel="prev" title="最邻近规则分类(K-Nearest Neighbor)KNN算法">
                最邻近规则分类(K-Nearest Neighbor)KNN算法 <i class="fa fa-chevron-right"></i>
              </a>
            
          </div>
        </div>
      

      
      
    </footer>
  </article>



    <div class="post-spread">
      
    </div>
  </div>


          </div>
          


          
  <div class="comments" id="comments">
    
  </div>


        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    <div class="sidebar-inner">

      

      
        <ul class="sidebar-nav motion-element">
          <li class="sidebar-nav-toc sidebar-nav-active" data-target="post-toc-wrap" >
            文章目录
          </li>
          <li class="sidebar-nav-overview" data-target="site-overview">
            站点概览
          </li>
        </ul>
      

      <section class="site-overview sidebar-panel">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <img class="site-author-image" itemprop="image"
               src="/images/avatar.gif"
               alt="刘铸澎" />
          <p class="site-author-name" itemprop="name">刘铸澎</p>
           
              <p class="site-description motion-element" itemprop="description"></p>
          
        </div>
        <nav class="site-state motion-element">

          
            <div class="site-state-item site-state-posts">
              <a href="/archives">
                <span class="site-state-item-count">46</span>
                <span class="site-state-item-name">日志</span>
              </a>
            </div>
          

          
            
            
            <div class="site-state-item site-state-categories">
              <a href="/categories/index.html">
                <span class="site-state-item-count">13</span>
                <span class="site-state-item-name">分类</span>
              </a>
            </div>
          

          
            
            
            <div class="site-state-item site-state-tags">
              <a href="/tags/index.html">
                <span class="site-state-item-count">45</span>
                <span class="site-state-item-name">标签</span>
              </a>
            </div>
          

        </nav>

        
          <div class="feed-link motion-element">
            <a href="/atom.xml" rel="alternate">
              <i class="fa fa-rss"></i>
              RSS
            </a>
          </div>
        

        <div class="links-of-author motion-element">
          
            
              <span class="links-of-author-item">
                <a href="http://git.oschina.net/dashboard/projects" target="_blank" title="GitHub">
                  
                    <i class="fa fa-fw fa-github"></i>
                  
                  GitHub
                </a>
              </span>
            
          
        </div>

        
        

        
        

        


      </section>

      
      <!--noindex-->
        <section class="post-toc-wrap motion-element sidebar-panel sidebar-panel-active">
          <div class="post-toc">

            
              
            

            
              <div class="post-toc-content"><ol class="nav"><li class="nav-item nav-level-3"><a class="nav-link" href="#目录"><span class="nav-number">1.</span> <span class="nav-text">目录</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#注入依赖"><span class="nav-number">2.</span> <span class="nav-text">注入依赖</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#简单模型"><span class="nav-number">2.1.</span> <span class="nav-text">简单模型</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#ng-bind"><span class="nav-number">3.</span> <span class="nav-text">ng-bind</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#ng-controller作用域"><span class="nav-number">4.</span> <span class="nav-text">ng-controller作用域</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#scope里的-apply、-digest方法"><span class="nav-number">5.</span> <span class="nav-text"> $scope里的$apply、$digest方法</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#scope里的-watch"><span class="nav-number">6.</span> <span class="nav-text"> $scope里的$watch</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#案例-购物车"><span class="nav-number">6.1.</span> <span class="nav-text">案例 购物车</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#模块和控制器"><span class="nav-number">7.</span> <span class="nav-text">模块和控制器</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#provide里provider方法"><span class="nav-number">8.</span> <span class="nav-text">$provide里provider方法</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#provider里factory、service方法"><span class="nav-number">9.</span> <span class="nav-text">$provider里factory、service方法</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#多个控制器内数据共享"><span class="nav-number">10.</span> <span class="nav-text">多个控制器内数据共享</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#过滤器-number、currency、date"><span class="nav-number">11.</span> <span class="nav-text">过滤器 number、currency、date</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#过滤器-limitTo、lowercase"><span class="nav-number">12.</span> <span class="nav-text">过滤器 limitTo、lowercase</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#案例-过滤器-产品列表（排序）"><span class="nav-number">13.</span> <span class="nav-text">案例 过滤器 产品列表（排序）</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#自定义过滤器-controllerProvider使用"><span class="nav-number">14.</span> <span class="nav-text">自定义过滤器$controllerProvider使用</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#控制器的合理使用、显示和隐示的依赖注入"><span class="nav-number">15.</span> <span class="nav-text">控制器的合理使用、显示和隐示的依赖注入</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#内置渲染指令"><span class="nav-number">16.</span> <span class="nav-text">内置渲染指令</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#自定义指令-restrict、template等属性"><span class="nav-number">17.</span> <span class="nav-text">自定义指令 restrict、template等属性</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#自定义指令-templateUrl属性"><span class="nav-number">18.</span> <span class="nav-text">自定义指令 templateUrl属性</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#自定义指令transclude、priority等属性"><span class="nav-number">19.</span> <span class="nav-text">自定义指令transclude、priority等属性</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#自定义指令-compile-link属性"><span class="nav-number">20.</span> <span class="nav-text">自定义指令 compile  link属性</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#自定义指令-controller-amp-amp-link-等属性"><span class="nav-number">21.</span> <span class="nav-text">自定义指令 controller && link 等属性</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#自定义指令-require-属性"><span class="nav-number">22.</span> <span class="nav-text">自定义指令 require 属性</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#自定义指令-scope-属性"><span class="nav-number">23.</span> <span class="nav-text">自定义指令 scope 属性</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#自定义accordion指令"><span class="nav-number">24.</span> <span class="nav-text">自定义accordion指令</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#模块里constant、value、run方法"><span class="nav-number">25.</span> <span class="nav-text">模块里constant、value、run方法</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#表单-Form、Text"><span class="nav-number">26.</span> <span class="nav-text"> 表单 Form、Text</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#自定义表单验证"><span class="nav-number">27.</span> <span class="nav-text">自定义表单验证</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#路由route"><span class="nav-number">28.</span> <span class="nav-text">路由route</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#templateCache"><span class="nav-number">29.</span> <span class="nav-text">$templateCache</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#complie与link"><span class="nav-number">30.</span> <span class="nav-text">complie与link</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#鼠标滑动引起后台控制"><span class="nav-number">31.</span> <span class="nav-text">鼠标滑动引起后台控制</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#鼠标滑动之动感超人"><span class="nav-number">32.</span> <span class="nav-text">鼠标滑动之动感超人</span></a></li></ol></div>
            

          </div>
        </section>
      <!--/noindex-->
      

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <script async src="https://dn-lbstatics.qbox.me/busuanzi/2.3/busuanzi.pure.mini.js">
</script>


<div class="copyright" >
  
  &copy; 
  <span itemprop="copyrightYear">2018</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">刘铸澎</span>
</div>


<div class="powered-by">
  由 <a class="theme-link" href="https://hexo.io">Hexo</a> 强力驱动
</div>

<div class="theme-info">
  主题 -
  <a class="theme-link" href="https://github.com/iissnan/hexo-theme-next">
    NexT.Mist
  </a>
</div>
<div>
<span id="busuanzi_container_site_pv">
    本站总访问量<span id="busuanzi_value_site_pv"></span>次
</span>
</div>


        

        
      </div>
    </footer>

    
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
        
      </div>
    

  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  












  
  <script type="text/javascript" src="/lib/jquery/index.js?v=2.1.3"></script>

  
  <script type="text/javascript" src="/lib/fastclick/lib/fastclick.min.js?v=1.0.6"></script>

  
  <script type="text/javascript" src="/lib/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>

  
  <script type="text/javascript" src="/lib/velocity/velocity.min.js?v=1.2.1"></script>

  
  <script type="text/javascript" src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>

  
  <script type="text/javascript" src="/lib/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>


  


  <script type="text/javascript" src="/js/src/utils.js?v=5.1.1"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=5.1.1"></script>



  
  

  
  <script type="text/javascript" src="/js/src/scrollspy.js?v=5.1.1"></script>
<script type="text/javascript" src="/js/src/post-details.js?v=5.1.1"></script>



  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=5.1.1"></script>



  


  




	





  





  





  






  




  
  
  
  <link rel="stylesheet" href="/lib/algolia-instant-search/instantsearch.min.css">

  
  
  <script src="/lib/algolia-instant-search/instantsearch.min.js"></script>
  

  <script src="/js/src/algolia-search.js?v=5.1.1"></script>



  

  
  <script src="https://cdn1.lncld.net/static/js/av-core-mini-0.6.1.js"></script>
  <script>AV.initialize("6OMtX0qKxdIdOnV5KE5rgWX1-gzGzoHsz", "ODT08Qg3pX4wC18rqsaLQb35");</script>
  <script>
    function showTime(Counter) {
      var query = new AV.Query(Counter);
      var entries = [];
      var $visitors = $(".leancloud_visitors");

      $visitors.each(function () {
        entries.push( $(this).attr("id").trim() );
      });

      query.containedIn('url', entries);
      query.find()
        .done(function (results) {
          var COUNT_CONTAINER_REF = '.leancloud-visitors-count';

          if (results.length === 0) {
            $visitors.find(COUNT_CONTAINER_REF).text(0);
            return;
          }

          for (var i = 0; i < results.length; i++) {
            var item = results[i];
            var url = item.get('url');
            var time = item.get('time');
            var element = document.getElementById(url);

            $(element).find(COUNT_CONTAINER_REF).text(time);
          }
          for(var i = 0; i < entries.length; i++) {
            var url = entries[i];
            var element = document.getElementById(url);
            var countSpan = $(element).find(COUNT_CONTAINER_REF);
            if( countSpan.text() == '') {
              countSpan.text(0);
            }
          }
        })
        .fail(function (object, error) {
          console.log("Error: " + error.code + " " + error.message);
        });
    }

    function addCount(Counter) {
      var $visitors = $(".leancloud_visitors");
      var url = $visitors.attr('id').trim();
      var title = $visitors.attr('data-flag-title').trim();
      var query = new AV.Query(Counter);

      query.equalTo("url", url);
      query.find({
        success: function(results) {
          if (results.length > 0) {
            var counter = results[0];
            counter.fetchWhenSave(true);
            counter.increment("time");
            counter.save(null, {
              success: function(counter) {
                var $element = $(document.getElementById(url));
                $element.find('.leancloud-visitors-count').text(counter.get('time'));
              },
              error: function(counter, error) {
                console.log('Failed to save Visitor num, with error message: ' + error.message);
              }
            });
          } else {
            var newcounter = new Counter();
            /* Set ACL */
            var acl = new AV.ACL();
            acl.setPublicReadAccess(true);
            acl.setPublicWriteAccess(true);
            newcounter.setACL(acl);
            /* End Set ACL */
            newcounter.set("title", title);
            newcounter.set("url", url);
            newcounter.set("time", 1);
            newcounter.save(null, {
              success: function(newcounter) {
                var $element = $(document.getElementById(url));
                $element.find('.leancloud-visitors-count').text(newcounter.get('time'));
              },
              error: function(newcounter, error) {
                console.log('Failed to create');
              }
            });
          }
        },
        error: function(error) {
          console.log('Error:' + error.code + " " + error.message);
        }
      });
    }

    $(function() {
      var Counter = AV.Object.extend("Counter");
      if ($('.leancloud_visitors').length == 1) {
        addCount(Counter);
      } else if ($('.post-title-link').length > 1) {
        showTime(Counter);
      }
    });
  </script>



  

  
  


  

  

</body>
</html>
